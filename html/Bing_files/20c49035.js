(function(n,t){var i,r;if(typeof exports=="object"&&typeof module=="object")module.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{i=t();for(r in i)(typeof exports=="object"?exports:n)[r]=i[r]}})(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var i=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=20)}([function(n,t,i){"use strict";var u,f,r,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt;Object.defineProperty(t,"__esModule",{value:!0});u=i(35);t.AudioConfig=u.AudioConfig;f=i(17);t.AudioStreamFormat=f.AudioStreamFormat;r=i(16);t.AudioInputStream=r.AudioInputStream;t.PullAudioInputStream=r.PullAudioInputStream;t.PushAudioInputStream=r.PushAudioInputStream;e=i(36);t.CancellationReason=e.CancellationReason;o=i(37);t.PullAudioInputStreamCallback=o.PullAudioInputStreamCallback;s=i(38);t.KeywordRecognitionModel=s.KeywordRecognitionModel;h=i(39);t.SessionEventArgs=h.SessionEventArgs;c=i(40);t.RecognitionEventArgs=c.RecognitionEventArgs;l=i(41);t.OutputFormat=l.OutputFormat;a=i(42);t.IntentRecognitionEventArgs=a.IntentRecognitionEventArgs;v=i(43);t.RecognitionResult=v.RecognitionResult;y=i(44);t.SpeechRecognitionResult=y.SpeechRecognitionResult;p=i(45);t.IntentRecognitionResult=p.IntentRecognitionResult;w=i(46);t.LanguageUnderstandingModel=w.LanguageUnderstandingModel;b=i(47);t.SpeechRecognitionEventArgs=b.SpeechRecognitionEventArgs;k=i(48);t.SpeechRecognitionCanceledEventArgs=k.SpeechRecognitionCanceledEventArgs;d=i(49);t.TranslationRecognitionEventArgs=d.TranslationRecognitionEventArgs;g=i(50);t.TranslationSynthesisEventArgs=g.TranslationSynthesisEventArgs;nt=i(51);t.TranslationRecognitionResult=nt.TranslationRecognitionResult;tt=i(52);t.TranslationSynthesisResult=tt.TranslationSynthesisResult;it=i(53);t.ResultReason=it.ResultReason;rt=i(54);t.SpeechConfig=rt.SpeechConfig;ut=i(67);t.SpeechTranslationConfig=ut.SpeechTranslationConfig;ft=i(68);t.PropertyCollection=ft.PropertyCollection;et=i(69);t.PropertyId=et.PropertyId;ot=i(70);t.Recognizer=ot.Recognizer;st=i(71);t.SpeechRecognizer=st.SpeechRecognizer;ht=i(72);t.IntentRecognizer=ht.IntentRecognizer;ct=i(73);t.TranslationRecognizer=ct.TranslationRecognizer;lt=i(74);t.Translations=lt.Translations;at=i(75);t.NoMatchReason=at.NoMatchReason;vt=i(76);t.NoMatchDetails=vt.NoMatchDetails;yt=i(77);t.TranslationRecognitionCanceledEventArgs=yt.TranslationRecognitionCanceledEventArgs;pt=i(78);t.IntentRecognitionCanceledEventArgs=pt.IntentRecognitionCanceledEventArgs;wt=i(79);t.CancellationDetails=wt.CancellationDetails},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}Object.defineProperty(t,"__esModule",{value:!0});r(i(23));r(i(24));r(i(10));r(i(25));r(i(3));r(i(26));r(i(11));r(i(5));r(i(27));r(i(12));r(i(13));r(i(8));r(i(14));r(i(15));r(i(28));r(i(29));r(i(30));r(i(31));var u=i(32);t.TranslationStatus=u.TranslationStatus},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}Object.defineProperty(t,"__esModule",{value:!0});r(i(55));r(i(56));r(i(9));r(i(57));r(i(7));r(i(58));r(i(61));r(i(62));r(i(63));r(i(18));r(i(65));r(i(66));t.OutputFormatPropertyName="OutputFormat"},function(n,t){"use strict";var i=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u,f;Object.defineProperty(t,"__esModule",{value:!0});r=function(n){function t(t){var i=n.call(this,t)||this;return i.name="ArgumentNull",i.message=t,i}return i(t,n),t}(Error);t.ArgumentNullError=r;u=function(n){function t(t){var i=n.call(this,t)||this;return i.name="InvalidOperation",i.message=t,i}return i(t,n),t}(Error);t.InvalidOperationError=u;f=function(n){function t(t,i){var r=n.call(this,i)||this;return r.name=t+"ObjectDisposed",r.message=i,r}return i(t,n),t}(Error);t.ObjectDisposedError=f},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){}return n.throwIfNullOrUndefined=function(n,t){if(n===undefined||n===null)throw new Error("throwIfNullOrUndefined:"+t);},n.throwIfNull=function(n,t){if(n===null)throw new Error("throwIfNull:"+t);},n.throwIfNullOrWhitespace=function(t,i){if(n.throwIfNullOrUndefined(t,i),(""+t).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+i);},n.throwIfDisposed=function(n){if(n)throw new Error("the object is already disposed");},n.throwIfArrayEmptyOrWhitespace=function(t,i){var r,u,f;if(n.throwIfNullOrUndefined(t,i),t.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+i);for(r=0,u=t;r<u.length;r++)f=u[r],n.throwIfNullOrWhitespace(f,i)},n.throwIfFileDoesNotExist=function(t,i){n.throwIfNullOrWhitespace(t,i)},n}();t.Contracts=i},function(n,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0});i=function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t==="x"?i:i&3|8).toString(16)})};t.CreateGuid=i;r=function(){return i().replace(new RegExp("-","g"),"").toUpperCase()};t.CreateNoDashGuid=r},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}Object.defineProperty(t,"__esModule",{value:!0});r(i(22));r(i(33));r(i(34));r(i(80));r(i(81));r(i(82));r(i(83));r(i(84));r(i(85));r(i(19))},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),e,f,u,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft;Object.defineProperty(t,"__esModule",{value:!0});e=i(1);f=function(n){function t(t,i,r,u){u===void 0&&(u=e.EventType.Info);var f=n.call(this,t,u)||this;return f.requestId=i,f.sessionId=r,f}return r(t,n),Object.defineProperty(t.prototype,"RequestId",{get:function(){return this.requestId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SessionId",{get:function(){return this.sessionId},enumerable:!0,configurable:!0}),t}(e.PlatformEvent);t.SpeechRecognitionEvent=f;u=function(n){function t(t,i,r,u){var f=n.call(this,t,i,r)||this;return f.result=u,f}return r(t,n),Object.defineProperty(t.prototype,"Result",{get:function(){return this.result},enumerable:!0,configurable:!0}),t}(f);t.SpeechRecognitionResultEvent=u;o=function(n){function t(t,i,r,u){var f=n.call(this,"RecognitionTriggeredEvent",t,i)||this;return f.audioSourceId=r,f.audioNodeId=u,f}return r(t,n),Object.defineProperty(t.prototype,"AudioSourceId",{get:function(){return this.audioSourceId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AudioNodeId",{get:function(){return this.audioNodeId},enumerable:!0,configurable:!0}),t}(f);t.RecognitionTriggeredEvent=o;s=function(n){function t(t,i,r,u){var f=n.call(this,"ListeningStartedEvent",t,i)||this;return f.audioSourceId=r,f.audioNodeId=u,f}return r(t,n),Object.defineProperty(t.prototype,"AudioSourceId",{get:function(){return this.audioSourceId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AudioNodeId",{get:function(){return this.audioNodeId},enumerable:!0,configurable:!0}),t}(f);t.ListeningStartedEvent=s;h=function(n){function t(t,i,r){var u=n.call(this,"ConnectingToServiceEvent",t,r)||this;return u.authFetchEventid=i,u}return r(t,n),Object.defineProperty(t.prototype,"AuthFetchEventid",{get:function(){return this.authFetchEventid},enumerable:!0,configurable:!0}),t}(f);t.ConnectingToServiceEvent=h;c=function(n){function t(t,i,r,u,f){var e=n.call(this,"RecognitionStartedEvent",t,f)||this;return e.audioSourceId=i,e.audioNodeId=r,e.authFetchEventId=u,e}return r(t,n),Object.defineProperty(t.prototype,"AudioSourceId",{get:function(){return this.audioSourceId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AudioNodeId",{get:function(){return this.audioNodeId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AuthFetchEventId",{get:function(){return this.authFetchEventId},enumerable:!0,configurable:!0}),t}(f);t.RecognitionStartedEvent=c;l=function(n){function t(t,i,r){return n.call(this,"SpeechStartDetectedEvent",t,i,r)||this}return r(t,n),t}(u);t.SpeechStartDetectedEvent=l;a=function(n){function t(t,i,r){return n.call(this,"SpeechHypothesisEvent",t,i,r)||this}return r(t,n),t}(u);t.SpeechHypothesisEvent=a;v=function(n){function t(t,i,r){return n.call(this,"SpeechFragmentEvent",t,i,r)||this}return r(t,n),t}(u);t.SpeechFragmentEvent=v;y=function(n){function t(t,i,r){return n.call(this,"SpeechEndDetectedEvent",t,i,r)||this}return r(t,n),t}(u);t.SpeechEndDetectedEvent=y;p=function(n){function t(t,i,r){return n.call(this,"SpeechSimplePhraseEvent",t,i,r)||this}return r(t,n),t}(u);t.SpeechSimplePhraseEvent=p;w=function(n){function t(t,i,r){return n.call(this,"SpeechDetailedPhraseEvent",t,i,r)||this}return r(t,n),t}(u);t.SpeechDetailedPhraseEvent=w;b=function(n){function t(t,i,r){return n.call(this,"TranslationHypothesisEvent",t,i,r)||this}return r(t,n),t}(u);t.TranslationHypothesisEvent=b;k=function(n){function t(t,i,r){return n.call(this,"TranslationPhraseEvent",t,i,r)||this}return r(t,n),t}(u);t.TranslationPhraseEvent=k;d=function(n){function t(t,i,r){return n.call(this,"TranslationFailedEvent",t,i,r)||this}return r(t,n),t}(u);t.TranslationFailedEvent=d;g=function(n){function t(t,i,r){return n.call(this,"RecognitionFailedEvent",t,i,r)||this}return r(t,n),t}(u);t.RecognitionFailedEvent=g;nt=function(n){function t(t,i,r){return n.call(this,"TranslationSynthesisEvent",t,i,r)||this}return r(t,n),t}(u);t.TranslationSynthesisEvent=nt;tt=function(n){function t(t,i,r){return n.call(this,"TranslationSynthesisErrorEvent",t,i,r)||this}return r(t,n),t}(u);t.TranslationSynthesisErrorEvent=tt;it=function(n){function t(t,i,r){return n.call(this,"IntentResponseEvent",t,i,r)||this}return r(t,n),t}(u);t.IntentResponseEvent=it;rt=function(n){function t(t,i,r){return n.call(this,"InternalErrorEvent",t,i,r)||this}return r(t,n),t}(u);t.InternalErrorEvent=rt,function(n){n[n.Success=0]="Success";n[n.AudioSourceError=1]="AudioSourceError";n[n.AudioSourceTimeout=2]="AudioSourceTimeout";n[n.AuthTokenFetchError=3]="AuthTokenFetchError";n[n.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout";n[n.UnAuthorized=5]="UnAuthorized";n[n.ConnectTimeout=6]="ConnectTimeout";n[n.ConnectError=7]="ConnectError";n[n.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout";n[n.UnknownError=9]="UnknownError"}(ut=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));ft=function(n){function t(t,i,r,u,f,o,s,h){var c=n.call(this,"RecognitionEndedEvent",t,f,s===ut.Success?e.EventType.Info:e.EventType.Error)||this;return c.audioSourceId=i,c.audioNodeId=r,c.authFetchEventId=u,c.status=s,c.error=h,c.serviceTag=o,c}return r(t,n),Object.defineProperty(t.prototype,"AudioSourceId",{get:function(){return this.audioSourceId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AudioNodeId",{get:function(){return this.audioNodeId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AuthFetchEventId",{get:function(){return this.authFetchEventId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ServiceTag",{get:function(){return this.serviceTag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Status",{get:function(){return this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Error",{get:function(){return this.error},enumerable:!0,configurable:!0}),t}(f);t.RecognitionEndedEvent=ft},function(n,t,i){"use strict";var r,f,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(5),function(n){n[n.Debug=0]="Debug";n[n.Info=1]="Info";n[n.Warning=2]="Warning";n[n.Error=3]="Error"}(f=t.EventType||(t.EventType={}));u=function(){function n(n,t){this.name=n;this.eventId=r.CreateNoDashGuid();this.eventTime=(new Date).toISOString();this.eventType=t;this.metadata={}}return Object.defineProperty(n.prototype,"Name",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"EventId",{get:function(){return this.eventId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"EventTime",{get:function(){return this.eventTime},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"EventType",{get:function(){return this.eventType},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Metadata",{get:function(){return this.metadata},enumerable:!0,configurable:!0}),n}();t.PlatformEvent=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t){this.headerName=n;this.token=t}return Object.defineProperty(n.prototype,"HeaderName",{get:function(){return this.headerName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Token",{get:function(){return this.token},enumerable:!0,configurable:!0}),n}();t.AuthInfo=i},function(n,t,i){"use strict";var r,f,u,e;Object.defineProperty(t,"__esModule",{value:!0});r=i(3);f=i(5),function(n){n[n.Text=0]="Text";n[n.Binary=1]="Binary"}(u=t.MessageType||(t.MessageType={}));e=function(){function n(n,t,i,e){if(this.body=null,n===u.Text&&t&&!(typeof t=="string"))throw new r.InvalidOperationError("Payload must be a string");if(n===u.Binary&&t&&!(t instanceof ArrayBuffer))throw new r.InvalidOperationError("Payload must be ArrayBuffer");this.messageType=n;this.body=t;this.headers=i?i:{};this.id=e?e:f.CreateNoDashGuid()}return Object.defineProperty(n.prototype,"MessageType",{get:function(){return this.messageType},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Headers",{get:function(){return this.headers},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Body",{get:function(){return this.body},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"TextBody",{get:function(){if(this.messageType===u.Binary)throw new r.InvalidOperationError("Not supported for binary message");return this.body},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"BinaryBody",{get:function(){if(this.messageType===u.Text)throw new r.InvalidOperationError("Not supported for text message");return this.body},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),n}();t.ConnectionMessage=e},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),u=i(5),f=function(){function n(n){var t=this;this.eventListeners={};this.isDisposed=!1;this.OnEvent=function(n){var i,u;if(t.IsDisposed())throw new r.ObjectDisposedError("EventSource");if(t.Metadata)for(i in t.Metadata)i&&n.Metadata&&(n.Metadata[i]||(n.Metadata[i]=t.Metadata[i]));for(u in t.eventListeners)u&&t.eventListeners[u]&&t.eventListeners[u](n)};this.Attach=function(n){var i=u.CreateNoDashGuid();return t.eventListeners[i]=n,{Detach:function(){delete t.eventListeners[i]}}};this.AttachListener=function(n){return t.Attach(n.OnEvent)};this.IsDisposed=function(){return t.isDisposed};this.Dispose=function(){t.eventListeners=null;t.isDisposed=!0};this.metadata=n}return Object.defineProperty(n.prototype,"Metadata",{get:function(){return this.metadata},enumerable:!0,configurable:!0}),n}();t.EventSource=f},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),u=function(){function n(){var n=this;this.store={};this.Get=function(t){if(!t)throw new r.ArgumentNullError("key");return n.store[t]};this.GetOrAdd=function(t,i){if(!t)throw new r.ArgumentNullError("key");return n.store[t]===undefined&&(n.store[t]=i),n.store[t]};this.Set=function(t,i){if(!t)throw new r.ArgumentNullError("key");n.store[t]=i};this.Remove=function(t){if(!t)throw new r.ArgumentNullError("key");n.store[t]!==undefined&&delete n.store[t]}}return n}();t.InMemoryStorage=u},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),u=function(){function n(t){var i=this,u,f,e;if(this.subscriptionIdCounter=0,this.addSubscriptions={},this.removeSubscriptions={},this.disposedSubscriptions={},this.disposeReason=null,this.Get=function(n){return i.ThrowIfDisposed(),i.list[n]},this.First=function(){return i.Get(0)},this.Last=function(){return i.Get(i.Length()-1)},this.Add=function(n){i.ThrowIfDisposed();i.InsertAt(i.list.length,n)},this.InsertAt=function(n,t){i.ThrowIfDisposed();n===0?i.list.unshift(t):n===i.list.length?i.list.push(t):i.list.splice(n,0,t);i.TriggerSubscriptions(i.addSubscriptions)},this.RemoveFirst=function(){return i.ThrowIfDisposed(),i.RemoveAt(0)},this.RemoveLast=function(){return i.ThrowIfDisposed(),i.RemoveAt(i.Length()-1)},this.RemoveAt=function(n){return i.ThrowIfDisposed(),i.Remove(n,1)[0]},this.Remove=function(n,t){i.ThrowIfDisposed();var r=i.list.splice(n,t);return i.TriggerSubscriptions(i.removeSubscriptions),r},this.Clear=function(){i.ThrowIfDisposed();i.Remove(0,i.Length())},this.Length=function(){return i.ThrowIfDisposed(),i.list.length},this.OnAdded=function(n){i.ThrowIfDisposed();var t=i.subscriptionIdCounter++;return i.addSubscriptions[t]=n,{Detach:function(){delete i.addSubscriptions[t]}}},this.OnRemoved=function(n){i.ThrowIfDisposed();var t=i.subscriptionIdCounter++;return i.removeSubscriptions[t]=n,{Detach:function(){delete i.removeSubscriptions[t]}}},this.OnDisposed=function(n){i.ThrowIfDisposed();var t=i.subscriptionIdCounter++;return i.disposedSubscriptions[t]=n,{Detach:function(){delete i.disposedSubscriptions[t]}}},this.Join=function(n){return i.ThrowIfDisposed(),i.list.join(n)},this.ToArray=function(){var n=Array();return i.list.forEach(function(t){n.push(t)}),n},this.Any=function(n){return i.ThrowIfDisposed(),n?i.Where(n).Length()>0:i.Length()>0},this.All=function(n){return i.ThrowIfDisposed(),i.Where(n).Length()===i.Length()},this.ForEach=function(n){i.ThrowIfDisposed();for(var t=0;t<i.Length();t++)n(i.list[t],t)},this.Select=function(t){var u,r;for(i.ThrowIfDisposed(),u=[],r=0;r<i.list.length;r++)u.push(t(i.list[r],r));return new n(u)},this.Where=function(t){var u,r;for(i.ThrowIfDisposed(),u=new n,r=0;r<i.list.length;r++)t(i.list[r],r)&&u.Add(i.list[r]);return u},this.OrderBy=function(t){i.ThrowIfDisposed();var r=i.ToArray(),u=r.sort(t);return new n(u)},this.OrderByDesc=function(n){return i.ThrowIfDisposed(),i.OrderBy(function(t,i){return n(i,t)})},this.Clone=function(){return i.ThrowIfDisposed(),new n(i.ToArray())},this.Concat=function(t){return i.ThrowIfDisposed(),new n(i.list.concat(t.ToArray()))},this.ConcatArray=function(t){return i.ThrowIfDisposed(),new n(i.list.concat(t))},this.IsDisposed=function(){return i.list==null},this.Dispose=function(n){i.IsDisposed()||(i.disposeReason=n,i.list=null,i.addSubscriptions=null,i.removeSubscriptions=null,i.TriggerSubscriptions(i.disposedSubscriptions))},this.ThrowIfDisposed=function(){if(i.IsDisposed())throw new r.ObjectDisposedError("List",i.disposeReason);},this.TriggerSubscriptions=function(n){if(n)for(var t in n)t&&n[t]()},this.list=[],t)for(u=0,f=t;u<f.length;u++)e=f[u],this.list.push(e)}return n}();t.List=u},function(n,t,i){"use strict";var r,u,e,o,c,s,f,h;Object.defineProperty(t,"__esModule",{value:!0});r=i(3),function(n){n[n.None=0]="None";n[n.Resolved=1]="Resolved";n[n.Rejected=2]="Rejected"}(u=t.PromiseState||(t.PromiseState={}));e=function(){function n(n){var t=this;this.ThrowIfError=function(){if(t.IsError)throw t.Error;};n.On(function(n){t.isCompleted||(t.isCompleted=!0,t.isError=!1,t.result=n)},function(n){t.isCompleted||(t.isCompleted=!0,t.isError=!0,t.error=n)})}return Object.defineProperty(n.prototype,"IsCompleted",{get:function(){return this.isCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"IsError",{get:function(){return this.isError},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Error",{get:function(){return this.error},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Result",{get:function(){return this.result},enumerable:!0,configurable:!0}),n}();t.PromiseResult=e;o=function(){function n(){var n=this;this.SetResult=function(t){n.onSetResult(t)};this.SetError=function(t){n.onSetError(t)};this.On=function(t,i){n.onSetResult=t;n.onSetError=i}}return n}();t.PromiseResultEventSource=o;c=function(){function n(){}return n.WhenAll=function(n){var t,e,h;if(!n||n.length===0)throw new r.ArgumentNullError("promises");var i=new f,u=[],o=0,s=function(){o++;o===n.length&&(u.length===0?i.Resolve(!0):i.Reject(u.join(", ")))};for(t=0,e=n;t<e.length;t++)h=e[t],h.On(function(){s()},function(n){u.push(n);s()});return i.Promise()},n.FromResult=function(n){var t=new f;return t.Resolve(n),t.Promise()},n.FromError=function(n){var t=new f;return t.Reject(n),t.Promise()},n}();t.PromiseHelper=c;s=function(){function n(n){var t=this;this.Result=function(){return t.sink.Result};this.ContinueWith=function(n){if(!n)throw new r.ArgumentNullError("continuationCallback");var i=new f;t.sink.on(function(){try{var r=n(t.sink.Result);i.Resolve(r)}catch(u){i.Reject(u)}},function(r){try{var u=n(t.sink.Result);i.Resolve(u)}catch(f){i.Reject("'Error handler for error "+r+" threw error "+f+"'")}});return i.Promise()};this.OnSuccessContinueWith=function(n){if(!n)throw new r.ArgumentNullError("continuationCallback");var i=new f;t.sink.on(function(t){try{var r=n(t);i.Resolve(r)}catch(u){i.Reject(u)}},function(n){i.Reject(n)});return i.Promise()};this.ContinueWithPromise=function(n){if(!n)throw new r.ArgumentNullError("continuationCallback");var i=new f;t.sink.on(function(){try{var r=n(t.sink.Result);if(!r)throw new Error("'Continuation callback did not return promise'");r.On(function(n){i.Resolve(n)},function(n){i.Reject(n)})}catch(u){i.Reject(u)}},function(r){try{var u=n(t.sink.Result);if(!u)throw new Error("Continuation callback did not return promise");u.On(function(n){i.Resolve(n)},function(n){i.Reject(n)})}catch(f){i.Reject("'Error handler for error "+r+" threw error "+f+"'")}});return i.Promise()};this.OnSuccessContinueWithPromise=function(n){if(!n)throw new r.ArgumentNullError("continuationCallback");var i=new f;t.sink.on(function(t){try{var r=n(t);if(!r)throw new Error("Continuation callback did not return promise");r.On(function(n){i.Resolve(n)},function(n){i.Reject(n)})}catch(u){i.Reject(u)}},function(n){i.Reject(n)});return i.Promise()};this.On=function(n,i){if(!n)throw new r.ArgumentNullError("successCallback");if(!i)throw new r.ArgumentNullError("errorCallback");t.sink.on(n,i);return t};this.Finally=function(n){if(!n)throw new r.ArgumentNullError("callback");var i=function(){n()};return t.On(i,i)};this.sink=n}return n}();t.Promise=s;f=function(){function n(){var n=this;this.State=function(){return n.sink.State};this.Promise=function(){return n.promise};this.Resolve=function(t){return n.sink.Resolve(t),n};this.Reject=function(t){return n.sink.Reject(t),n};this.sink=new h;this.promise=new s(this.sink)}return n}();t.Deferred=f;h=function(){function n(){var n=this;this.state=u.None;this.promiseResult=null;this.promiseResultEvents=null;this.successHandlers=[];this.errorHandlers=[];this.Resolve=function(t){if(n.state!==u.None)throw new Error("'Cannot resolve a completed promise'");n.state=u.Resolved;n.promiseResultEvents.SetResult(t);for(var i=0;i<n.successHandlers.length;i++)n.ExecuteSuccessCallback(t,n.successHandlers[i],n.errorHandlers[i]);n.DetachHandlers()};this.Reject=function(t){var i,r,f;if(n.state!==u.None)throw new Error("'Cannot reject a completed promise'");for(n.state=u.Rejected,n.promiseResultEvents.SetError(t),i=0,r=n.errorHandlers;i<r.length;i++)f=r[i],n.ExecuteErrorCallback(t,f);n.DetachHandlers()};this.on=function(t,i){t==null&&(t=function(){return});n.state===u.None?(n.successHandlers.push(t),n.errorHandlers.push(i)):(n.state===u.Resolved?n.ExecuteSuccessCallback(n.promiseResult.Result,t,i):n.state===u.Rejected&&n.ExecuteErrorCallback(n.promiseResult.Error,i),n.DetachHandlers())};this.ExecuteSuccessCallback=function(t,i,r){try{i(t)}catch(u){n.ExecuteErrorCallback("'Unhandled callback error: "+u+"'",r)}};this.ExecuteErrorCallback=function(n,t){if(t)try{t(n)}catch(i){throw new Error("'Unhandled callback error: "+i+". InnerError: "+n+"'");}else throw new Error("'Unhandled error: "+n+"'");};this.DetachHandlers=function(){n.errorHandlers=[];n.successHandlers=[]};this.promiseResultEvents=new o;this.promiseResult=new e(this.promiseResultEvents)}return Object.defineProperty(n.prototype,"State",{get:function(){return this.state},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Result",{get:function(){return this.promiseResult},enumerable:!0,configurable:!0}),n}();t.Sink=h},function(n,t,i){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0});var f=i(3),e=i(13),r=i(14),u;(function(n){n[n.Dequeue=0]="Dequeue";n[n.Peek=1]="Peek"})(u||(u={}));o=function(){function n(n){var t=this;this.promiseStore=new e.List;this.isDrainInProgress=!1;this.isDisposing=!1;this.disposeReason=null;this.Enqueue=function(n){t.ThrowIfDispose();t.EnqueueFromPromise(r.PromiseHelper.FromResult(n))};this.EnqueueFromPromise=function(n){t.ThrowIfDispose();t.promiseStore.Add(n);n.Finally(function(){while(t.promiseStore.Length()>0)if(t.promiseStore.First().Result().IsCompleted){var n=t.promiseStore.RemoveFirst();n.Result().IsError||t.list.Add(n.Result().Result)}else break})};this.Dequeue=function(){t.ThrowIfDispose();var n=new r.Deferred;return t.subscribers&&(t.subscribers.Add({deferral:n,type:u.Dequeue}),t.Drain()),n.Promise()};this.Peek=function(){t.ThrowIfDispose();var n=new r.Deferred,i=t.subscribers;return i&&(t.subscribers.Add({deferral:n,type:u.Peek}),t.Drain()),n.Promise()};this.Length=function(){return t.ThrowIfDispose(),t.list.Length()};this.IsDisposed=function(){return t.subscribers==null};this.DrainAndDispose=function(n,i){var u,o,f,e,s;if(!t.IsDisposed()&&!t.isDisposing){if(t.disposeReason=i,t.isDisposing=!0,u=t.subscribers,u){while(u.Length()>0)o=u.RemoveFirst(),o.deferral.Resolve(undefined);t.subscribers===u&&(t.subscribers=u)}for(f=0,e=t.detachables;f<e.length;f++)s=e[f],s.Detach();if(t.promiseStore.Length()>0&&n)return r.PromiseHelper.WhenAll(t.promiseStore.ToArray()).ContinueWith(function(){return t.subscribers=null,t.list.ForEach(function(t){n(t)}),t.list=null,!0});t.subscribers=null;t.list=null}return r.PromiseHelper.FromResult(!0)};this.Dispose=function(n){t.DrainAndDispose(null,n)};this.Drain=function(){var i,n,r,f;if(!t.isDrainInProgress&&!t.isDisposing){if(t.isDrainInProgress=!0,i=t.subscribers,n=t.list,i&&n){while(n.Length()>0&&i.Length()>0&&!t.isDisposing)r=i.RemoveFirst(),r.type===u.Peek?r.deferral.Resolve(n.First()):(f=n.RemoveFirst(),r.deferral.Resolve(f));t.subscribers===i&&(t.subscribers=i);t.list===n&&(t.list=n)}t.isDrainInProgress=!1}};this.ThrowIfDispose=function(){if(t.IsDisposed()){if(t.disposeReason)throw new f.InvalidOperationError(t.disposeReason);throw new f.ObjectDisposedError("Queue");}else if(t.isDisposing)throw new f.InvalidOperationError("Queue disposing");};this.list=n?n:new e.List;this.detachables=[];this.subscribers=new e.List;this.detachables.push(this.list.OnAdded(this.Drain))}return n}();t.Queue=o},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),e,h,o,c;Object.defineProperty(t,"__esModule",{value:!0});var l=i(5),r=i(1),a=i(0),v=i(17),u=4096,s=function(){function n(){}return n.createPushStream=function(n){return e.create(n)},n.createPullStream=function(n,t){return o.create(n,t)},n}();t.AudioInputStream=s;e=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return f(t,n),t.create=function(n){return new h(n)},t}(s);t.PushAudioInputStream=e;h=function(n){function t(t){var i=n.call(this)||this;return i.stream=new r.Stream,i.OnEvent=function(n){i.events.OnEvent(n);r.Events.Instance.OnEvent(n)},i.format=t===undefined?v.AudioStreamFormatImpl.getDefaultInputFormat():t,i.events=new r.EventSource,i.id=l.CreateNoDashGuid(),i}return f(t,n),Object.defineProperty(t.prototype,"Format",{get:function(){return this.format},enumerable:!0,configurable:!0}),t.prototype.write=function(n){for(var t=u-1;t<n.byteLength;t+=u)this.stream.Write(n.slice(t-(u-1),t));this.stream.Write(n.slice(t-(u-1),n.byteLength-1))},t.prototype.close=function(){this.stream.Close()},t.prototype.Id=function(){return this.id},t.prototype.TurnOn=function(){return this.OnEvent(new r.AudioSourceInitializingEvent(this.id)),this.OnEvent(new r.AudioSourceReadyEvent(this.id)),r.PromiseHelper.FromResult(!0)},t.prototype.Attach=function(n){var t=this;return this.OnEvent(new r.AudioStreamNodeAttachingEvent(this.id,n)),this.TurnOn().OnSuccessContinueWith(function(){return t.stream.GetReader()}).OnSuccessContinueWith(function(i){return t.OnEvent(new r.AudioStreamNodeAttachedEvent(t.id,n)),{Detach:function(){i.Close();t.OnEvent(new r.AudioStreamNodeDetachedEvent(t.id,n));t.TurnOff()},Id:function(){return n},Read:function(){return i.Read()}}})},t.prototype.Detach=function(n){this.OnEvent(new r.AudioStreamNodeDetachedEvent(this.id,n))},t.prototype.TurnOff=function(){return r.PromiseHelper.FromResult(!1)},Object.defineProperty(t.prototype,"Events",{get:function(){return this.events},enumerable:!0,configurable:!0}),t}(e);t.PushAudioInputStreamImpl=h;o=function(n){function t(){return n.call(this)||this}return f(t,n),t.create=function(n,t){return new c(n,t)},t}(s);t.PullAudioInputStream=o;c=function(n){function t(t,i){var u=n.call(this)||this;return u.OnEvent=function(n){u.events.OnEvent(n);r.Events.Instance.OnEvent(n)},u.format=undefined===i?a.AudioStreamFormat.getDefaultInputFormat():i,u.events=new r.EventSource,u.id=l.CreateNoDashGuid(),u.callback=t,u.isClosed=!1,u}return f(t,n),Object.defineProperty(t.prototype,"Format",{get:function(){return this.format},enumerable:!0,configurable:!0}),t.prototype.close=function(){this.isClosed=!0;this.callback.close()},t.prototype.Id=function(){return this.id},t.prototype.TurnOn=function(){return this.OnEvent(new r.AudioSourceInitializingEvent(this.id)),this.OnEvent(new r.AudioSourceReadyEvent(this.id)),r.PromiseHelper.FromResult(!0)},t.prototype.Attach=function(n){var t=this;return this.OnEvent(new r.AudioStreamNodeAttachingEvent(this.id,n)),this.TurnOn().OnSuccessContinueWith(function(){return t.OnEvent(new r.AudioStreamNodeAttachedEvent(t.id,n)),{Detach:function(){t.callback.close();t.OnEvent(new r.AudioStreamNodeDetachedEvent(t.id,n));t.TurnOff()},Id:function(){return n},Read:function(){var n=new ArrayBuffer(u),i=t.callback.read(n);return r.PromiseHelper.FromResult({Buffer:n.slice(0,i),IsEnd:t.isClosed})}}})},t.prototype.Detach=function(n){this.OnEvent(new r.AudioStreamNodeDetachedEvent(this.id,n))},t.prototype.TurnOff=function(){return r.PromiseHelper.FromResult(!1)},Object.defineProperty(t.prototype,"Events",{get:function(){return this.events},enumerable:!0,configurable:!0}),t}(o);t.PullAudioInputStreamImpl=c},function(n,t){"use strict";var u=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,i;Object.defineProperty(t,"__esModule",{value:!0});r=function(){function n(){}return n.getDefaultInputFormat=function(){return i.getDefaultInputFormat()},n.getWaveFormatPCM=function(n,t,r){return new i(n,t,r)},n}();t.AudioStreamFormat=r;i=function(n){function t(t,i,r){t===void 0&&(t=16e3);i===void 0&&(i=16);r===void 0&&(r=1);var u=n.call(this)||this;return u.formatTag=1,u.bitsPerSample=i,u.samplesPerSec=t,u.channels=r,u.avgBytesPerSec=u.samplesPerSec*u.channels*(u.bitsPerSample/8),u.blockAlign=u.channels*Math.max(u.bitsPerSample,8),u}return u(t,n),t.getDefaultInputFormat=function(){return new t},t.prototype.close=function(){return},t}(r);t.AudioStreamFormatImpl=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(6),s=i(2),f=i(1),u=i(0),e=i(2),r=i(64),h=function(){function n(){var n=this;this.Create=function(t,i,f){var h=t.parameters.getProperty(u.PropertyId.SpeechServiceConnection_Endpoint,undefined),c={},v=t.parameters.getProperty(u.PropertyId.SpeechServiceConnection_EndpointId,undefined),y=t.parameters.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage,undefined),l,a;if(v?h&&h.search(r.QueryParameterNames.DeploymentIdParamName)!==-1||(c[r.QueryParameterNames.DeploymentIdParamName]=v):y&&(h&&h.search(r.QueryParameterNames.LanguageParamName)!==-1||(c[r.QueryParameterNames.LanguageParamName]=y)),h&&h.search(r.QueryParameterNames.FormatParamName)!==-1||(c[r.QueryParameterNames.FormatParamName]=t.parameters.getProperty(s.OutputFormatPropertyName,u.OutputFormat[u.OutputFormat.Simple]).toLowerCase()),n.IsDebugModeEnabled&&(c[r.QueryParameterNames.TestHooksParamName]="1"),!h){l=t.parameters.getProperty(u.PropertyId.SpeechServiceConnection_Region,undefined);switch(t.RecognitionMode){case e.RecognitionMode.Conversation:h=n.Host(l)+n.ConversationRelativeUri;break;case e.RecognitionMode.Dictation:h=n.Host(l)+n.DictationRelativeUri;break;default:h=n.Host(l)+n.InteractiveRelativeUri}}return a={},a[i.HeaderName]=i.Token,a[r.QueryParameterNames.ConnectionIdHeader]=f,new o.WebsocketConnection(h,c,a,new e.WebsocketMessageFormatter,f)}}return n.prototype.Host=function(n){return f.Storage.Local.GetOrAdd("Host","wss://"+n+".stt.speech.microsoft.com")},Object.defineProperty(n.prototype,"InteractiveRelativeUri",{get:function(){return f.Storage.Local.GetOrAdd("InteractiveRelativeUri","/speech/recognition/interactive/cognitiveservices/v1")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ConversationRelativeUri",{get:function(){return f.Storage.Local.GetOrAdd("ConversationRelativeUri","/speech/recognition/conversation/cognitiveservices/v1")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"DictationRelativeUri",{get:function(){return f.Storage.Local.GetOrAdd("DictationRelativeUri","/speech/recognition/dictation/cognitiveservices/v1")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"IsDebugModeEnabled",{get:function(){var n=f.Storage.Local.GetOrAdd("IsDebugModeEnabled","false");return n.toLowerCase()==="true"},enumerable:!0,configurable:!0}),n}();t.SpeechConnectionFactory=h},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),u=function(){function n(n,t,i){var u=this;if(this.Open=function(){if(u.connectionState===r.ConnectionState.Disconnected)return r.PromiseHelper.FromError("Cannot open a connection that is in "+u.connectionState+" state");if(u.connectionEstablishDeferral)return u.connectionEstablishDeferral.Promise();u.connectionEstablishDeferral=new r.Deferred;u.connectionState=r.ConnectionState.Connecting;try{u.websocketClient=new WebSocket(u.uri);u.websocketClient.binaryType="arraybuffer";u.receivingMessageQueue=new r.Queue;u.disconnectDeferral=new r.Deferred;u.sendMessageQueue=new r.Queue;u.ProcessSendQueue()}catch(n){return u.connectionEstablishDeferral.Resolve(new r.ConnectionOpenResponse(500,n)),u.connectionEstablishDeferral.Promise()}return u.OnEvent(new r.ConnectionStartEvent(u.connectionId,u.uri)),u.websocketClient.onopen=function(){u.connectionState=r.ConnectionState.Connected;u.OnEvent(new r.ConnectionEstablishedEvent(u.connectionId));u.connectionEstablishDeferral.Resolve(new r.ConnectionOpenResponse(200,""))},u.websocketClient.onerror=function(){u.connectionState!==r.ConnectionState.Connecting},u.websocketClient.onclose=function(n){u.connectionState===r.ConnectionState.Connecting?(u.connectionState=r.ConnectionState.Disconnected,u.connectionEstablishDeferral.Resolve(new r.ConnectionOpenResponse(n.code,n.reason))):u.OnEvent(new r.ConnectionClosedEvent(u.connectionId,n.code,n.reason));u.OnClose(n.code,n.reason)},u.websocketClient.onmessage=function(n){var f=(new Date).toISOString(),t,i;u.connectionState===r.ConnectionState.Connected&&(t=new r.Deferred,u.receivingMessageQueue.EnqueueFromPromise(t.Promise()),n.data instanceof ArrayBuffer?(i=new r.RawWebsocketMessage(r.MessageType.Binary,n.data),u.messageFormatter.ToConnectionMessage(i).On(function(n){u.OnEvent(new r.ConnectionMessageReceivedEvent(u.connectionId,f,n));t.Resolve(n)},function(n){t.Reject("Invalid binary message format. Error: "+n)})):(i=new r.RawWebsocketMessage(r.MessageType.Text,n.data),u.messageFormatter.ToConnectionMessage(i).On(function(n){u.OnEvent(new r.ConnectionMessageReceivedEvent(u.connectionId,f,n));t.Resolve(n)},function(n){t.Reject("Invalid text message format. Error: "+n)})))},u.connectionEstablishDeferral.Promise()},this.Send=function(n){if(u.connectionState!==r.ConnectionState.Connected)return r.PromiseHelper.FromError("Cannot send on connection that is in "+u.connectionState+" state");var i=new r.Deferred,t=new r.Deferred;return u.sendMessageQueue.EnqueueFromPromise(t.Promise()),u.messageFormatter.FromConnectionMessage(n).On(function(r){t.Resolve({Message:n,RawWebsocketMessage:r,SendStatusDeferral:i})},function(n){t.Reject("Error formatting the message. "+n)}),i.Promise()},this.Read=function(){return u.connectionState!==r.ConnectionState.Connected?r.PromiseHelper.FromError("Cannot read on connection that is in "+u.connectionState+" state"):u.receivingMessageQueue.Dequeue()},this.Close=function(n){if(u.websocketClient)u.connectionState!==r.ConnectionState.Disconnected&&u.websocketClient.close(1e3,n?n:"Normal closure by client");else{var t=new r.Deferred;return t.Resolve(!0),t.Promise()}return u.disconnectDeferral.Promise()},this.SendRawMessage=function(n){try{return n?(u.OnEvent(new r.ConnectionMessageSentEvent(u.connectionId,(new Date).toISOString(),n.Message)),u.websocketClient.send(n.RawWebsocketMessage.Payload),r.PromiseHelper.FromResult(!0)):r.PromiseHelper.FromResult(!0)}catch(t){return r.PromiseHelper.FromError("websocket send error: "+t)}},this.OnClose=function(n,t){var i="Connection closed. "+n+": "+t;u.connectionState=r.ConnectionState.Disconnected;u.disconnectDeferral.Resolve(!0);u.receivingMessageQueue.Dispose(t);u.receivingMessageQueue.DrainAndDispose(function(){},i);u.sendMessageQueue.DrainAndDispose(function(n){n.SendStatusDeferral.Reject(i)},i)},this.ProcessSendQueue=function(){u.sendMessageQueue.Dequeue().On(function(n){n&&u.SendRawMessage(n).On(function(t){n.SendStatusDeferral.Resolve(t);u.ProcessSendQueue()},function(t){n.SendStatusDeferral.Reject(t);u.ProcessSendQueue()})},function(){})},this.OnEvent=function(n){u.connectionEvents.OnEvent(n);r.Events.Instance.OnEvent(n)},!n)throw new r.ArgumentNullError("uri");if(!i)throw new r.ArgumentNullError("messageFormatter");this.connectionEvents=new r.EventSource;this.connectionId=t;this.messageFormatter=i;this.connectionState=r.ConnectionState.None;this.uri=n}return Object.defineProperty(n.prototype,"State",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Events",{get:function(){return this.connectionEvents},enumerable:!0,configurable:!0}),n}();t.WebsocketMessageAdapter=u},function(n,t,i){n.exports=i(21)},function(n,t,i){"use strict";function r(n){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}Object.defineProperty(t,"__esModule",{value:!0});var u=i(6),f=i(1);f.Events.Instance.AttachListener(new u.ConsoleLoggingListener);r(i(0))},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),u=function(){function n(n){n===void 0&&(n=r.EventType.Warning);var t=this;this.OnEvent=function(n){if(n.EventType>=t.logLevelFilter){var i=t.ToString(n);switch(n.EventType){case r.EventType.Debug:console.debug(i);break;case r.EventType.Info:console.info(i);break;case r.EventType.Warning:console.warn(i);break;case r.EventType.Error:console.error(i);break;default:console.log(i)}}};this.ToString=function(n){var u=[""+n.EventTime,""+n.Name,],t,i,r;for(t in n)t&&n.hasOwnProperty(t)&&t!=="eventTime"&&t!=="eventType"&&t!=="eventId"&&t!=="name"&&t!=="constructor"&&(i=n[t],r="<NULL>",i!==undefined&&i!==null&&(r=typeof i=="number"||typeof i=="string"?i.toString():JSON.stringify(i)),u.push(t+": "+r));return u.join(" | ")};this.logLevelFilter=n}return n}();t.ConsoleLoggingListener=u},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),e,u,o,s,h,c,f,l,a,v,y;Object.defineProperty(t,"__esModule",{value:!0});e=i(8);u=function(n){function t(t,i,r){r===void 0&&(r=e.EventType.Info);var u=n.call(this,t,r)||this;return u.audioSourceId=i,u}return r(t,n),Object.defineProperty(t.prototype,"AudioSourceId",{get:function(){return this.audioSourceId},enumerable:!0,configurable:!0}),t}(e.PlatformEvent);t.AudioSourceEvent=u;o=function(n){function t(t){return n.call(this,"AudioSourceInitializingEvent",t)||this}return r(t,n),t}(u);t.AudioSourceInitializingEvent=o;s=function(n){function t(t){return n.call(this,"AudioSourceReadyEvent",t)||this}return r(t,n),t}(u);t.AudioSourceReadyEvent=s;h=function(n){function t(t){return n.call(this,"AudioSourceOffEvent",t)||this}return r(t,n),t}(u);t.AudioSourceOffEvent=h;c=function(n){function t(t,i){var r=n.call(this,"AudioSourceErrorEvent",t,e.EventType.Error)||this;return r.error=i,r}return r(t,n),Object.defineProperty(t.prototype,"Error",{get:function(){return this.error},enumerable:!0,configurable:!0}),t}(u);t.AudioSourceErrorEvent=c;f=function(n){function t(t,i,r){var u=n.call(this,t,i)||this;return u.audioNodeId=r,u}return r(t,n),Object.defineProperty(t.prototype,"AudioNodeId",{get:function(){return this.audioNodeId},enumerable:!0,configurable:!0}),t}(u);t.AudioStreamNodeEvent=f;l=function(n){function t(t,i){return n.call(this,"AudioStreamNodeAttachingEvent",t,i)||this}return r(t,n),t}(f);t.AudioStreamNodeAttachingEvent=l;a=function(n){function t(t,i){return n.call(this,"AudioStreamNodeAttachedEvent",t,i)||this}return r(t,n),t}(f);t.AudioStreamNodeAttachedEvent=a;v=function(n){function t(t,i){return n.call(this,"AudioStreamNodeDetachedEvent",t,i)||this}return r(t,n),t}(f);t.AudioStreamNodeDetachedEvent=v;y=function(n){function t(t,i,r){var u=n.call(this,"AudioStreamNodeErrorEvent",t,i)||this;return u.error=r,u}return r(t,n),Object.defineProperty(t.prototype,"Error",{get:function(){return this.error},enumerable:!0,configurable:!0}),t}(f);t.AudioStreamNodeErrorEvent=y},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),f,r,e,o,s,h,c,l;Object.defineProperty(t,"__esModule",{value:!0});f=i(8);r=function(n){function t(t,i,r){r===void 0&&(r=f.EventType.Info);var u=n.call(this,t,r)||this;return u.connectionId=i,u}return u(t,n),Object.defineProperty(t.prototype,"ConnectionId",{get:function(){return this.connectionId},enumerable:!0,configurable:!0}),t}(f.PlatformEvent);t.ConnectionEvent=r;e=function(n){function t(t,i,r){var u=n.call(this,"ConnectionStartEvent",t)||this;return u.uri=i,u.headers=r,u}return u(t,n),Object.defineProperty(t.prototype,"Uri",{get:function(){return this.uri},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Headers",{get:function(){return this.headers},enumerable:!0,configurable:!0}),t}(r);t.ConnectionStartEvent=e;o=function(n){function t(t){return n.call(this,"ConnectionEstablishedEvent",t)||this}return u(t,n),t}(r);t.ConnectionEstablishedEvent=o;s=function(n){function t(t,i,r){var u=n.call(this,"ConnectionClosedEvent",t,f.EventType.Debug)||this;return u.reason=r,u.statusCode=i,u}return u(t,n),Object.defineProperty(t.prototype,"Reason",{get:function(){return this.reason},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StatusCode",{get:function(){return this.statusCode},enumerable:!0,configurable:!0}),t}(r);t.ConnectionClosedEvent=s;h=function(n){function t(t,i,r){var u=n.call(this,"ConnectionEstablishErrorEvent",t,f.EventType.Error)||this;return u.statusCode=i,u.reason=r,u}return u(t,n),Object.defineProperty(t.prototype,"Reason",{get:function(){return this.reason},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StatusCode",{get:function(){return this.statusCode},enumerable:!0,configurable:!0}),t}(r);t.ConnectionEstablishErrorEvent=h;c=function(n){function t(t,i,r){var u=n.call(this,"ConnectionMessageReceivedEvent",t)||this;return u.networkReceivedTime=i,u.message=r,u}return u(t,n),Object.defineProperty(t.prototype,"NetworkReceivedTime",{get:function(){return this.networkReceivedTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Message",{get:function(){return this.message},enumerable:!0,configurable:!0}),t}(r);t.ConnectionMessageReceivedEvent=c;l=function(n){function t(t,i,r){var u=n.call(this,"ConnectionMessageSentEvent",t)||this;return u.networkSentTime=i,u.message=r,u}return u(t,n),Object.defineProperty(t.prototype,"NetworkSentTime",{get:function(){return this.networkSentTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Message",{get:function(){return this.message},enumerable:!0,configurable:!0}),t}(r);t.ConnectionMessageSentEvent=l},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t){this.statusCode=n;this.reason=t}return Object.defineProperty(n.prototype,"StatusCode",{get:function(){return this.statusCode},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Reason",{get:function(){return this.reason},enumerable:!0,configurable:!0}),n}();t.ConnectionOpenResponse=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),u=i(11),f=function(){function n(){}return Object.defineProperty(n,"Instance",{get:function(){return n.instance},enumerable:!0,configurable:!0}),n.instance=new u.EventSource,n.SetEventSource=function(t){if(!t)throw new r.ArgumentNullError("eventSource");n.instance=t},n}();t.Events=f},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.None=0]="None";n[n.Connected=1]="Connected";n[n.Connecting=2]="Connecting";n[n.Disconnected=3]="Disconnected"})(i=t.ConnectionState||(t.ConnectionState={}))},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=i(10),r=i(3),f=i(5),e=function(){function n(n,t,i){if(this.payload=null,!t)throw new r.ArgumentNullError("payload");if(n===u.MessageType.Binary&&!(t instanceof ArrayBuffer))throw new r.InvalidOperationError("Payload must be ArrayBuffer");if(n===u.MessageType.Text&&!(typeof t=="string"))throw new r.InvalidOperationError("Payload must be a string");this.messageType=n;this.payload=t;this.id=i?i:f.CreateNoDashGuid()}return Object.defineProperty(n.prototype,"MessageType",{get:function(){return this.messageType},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Payload",{get:function(){return this.payload},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"TextContent",{get:function(){if(this.messageType===u.MessageType.Binary)throw new r.InvalidOperationError("Not supported for binary message");return this.payload},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"BinaryContent",{get:function(){if(this.messageType===u.MessageType.Text)throw new r.InvalidOperationError("Not supported for text message");return this.payload},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),n}();t.RawWebsocketMessage=e},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t){var i=this;this.channelCount=1;this.Encode=function(n,t){var u=i.DownSampleAudioFrame(t,i.actualSampleRate,i.desiredSampleRate),f,e,o;if(!u)return null;if(f=u.length*2,!n)return e=new ArrayBuffer(f),o=new DataView(e),i.FloatTo16BitPCM(o,0,u),e;var s=new ArrayBuffer(44+f),h=16,c=h/8,l=0,r=new DataView(s);return i.SetString(r,0,"RIFF"),r.setUint32(4,l,!0),i.SetString(r,8,"WAVEfmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,i.channelCount,!0),r.setUint32(24,i.desiredSampleRate,!0),r.setUint32(28,i.desiredSampleRate*i.channelCount*c,!0),r.setUint16(32,i.channelCount*c,!0),r.setUint16(34,h,!0),i.SetString(r,36,"data"),r.setUint32(40,l,!0),i.FloatTo16BitPCM(r,44,u),s};this.SetString=function(n,t,i){for(var r=0;r<i.length;r++)n.setUint8(t+r,i.charCodeAt(r))};this.FloatTo16BitPCM=function(n,t,i){for(var u,r=0;r<i.length;r++,t+=2)u=Math.max(-1,Math.min(1,i[r])),n.setInt16(t,u<0?u*32768:u*32767,!0)};this.DownSampleAudioFrame=function(n,t,i){if(i===t||i>t)return n;for(var f=t/i,e=Math.round(n.length/f),o=new Float32Array(e),r=0,u=0;u<e;){for(var c=Math.round((u+1)*f),s=0,h=0;r<c&&r<n.length;)s+=n[r++],h++;o[u++]=s/h}return o};this.actualSampleRate=n;this.desiredSampleRate=t}return n}();t.RiffPcmEncoder=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),u=i(12),f=function(){function n(){}return Object.defineProperty(n,"Session",{get:function(){return n.sessionStorage},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Local",{get:function(){return n.localStorage},enumerable:!0,configurable:!0}),n.sessionStorage=new u.InMemoryStorage,n.localStorage=new u.InMemoryStorage,n.SetSessionStorage=function(t){if(!t)throw new r.ArgumentNullError("sessionStorage");n.sessionStorage=t},n.SetLocalStorage=function(t){if(!t)throw new r.ArgumentNullError("localStorage");n.localStorage=t},n}();t.Storage=f},function(n,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var u=i(3),f=i(5),e=i(15),o=function(){function n(n){var t=this;this.readerIdCounter=1;this.isEnded=!1;this.Write=function(n){t.ThrowIfClosed();t.WriteStreamChunk({Buffer:n,IsEnd:!1})};this.GetReader=function(){var u=t.readerIdCounter,n,f,i;for(t.readerIdCounter++,n=new e.Queue,f=t.streambuffer.length,t.readerQueues[u]=n,i=0;i<f;i++)n.Enqueue(t.streambuffer[i]);return new r(t.id,n,function(){delete t.readerQueues[u]})};this.Close=function(){t.isEnded||(t.WriteStreamChunk({Buffer:null,IsEnd:!0}),t.isEnded=!0)};this.WriteStreamChunk=function(n){t.ThrowIfClosed();t.streambuffer.push(n);for(var i in t.readerQueues)if(!t.readerQueues[i].IsDisposed())try{t.readerQueues[i].Enqueue(n)}catch(r){}};this.ThrowIfClosed=function(){if(t.isEnded)throw new u.InvalidOperationError("Stream closed");};this.id=n?n:f.CreateNoDashGuid();this.streambuffer=[];this.readerQueues={}}return Object.defineProperty(n.prototype,"IsClosed",{get:function(){return this.isEnded},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),n}();t.Stream=o;r=function(){function n(n,t,i){var r=this;this.isClosed=!1;this.Read=function(){if(r.IsClosed)throw new u.InvalidOperationError("StreamReader closed");return r.readerQueue.Dequeue().OnSuccessContinueWith(function(n){return n.IsEnd&&r.readerQueue.Dispose("End of stream reached"),n})};this.Close=function(){r.isClosed||(r.isClosed=!0,r.readerQueue.Dispose("StreamReader closed"),r.onClose())};this.readerQueue=t;this.onClose=i;this.streamId=n}return Object.defineProperty(n.prototype,"IsClosed",{get:function(){return this.isClosed},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"StreamId",{get:function(){return this.streamId},enumerable:!0,configurable:!0}),n}();t.StreamReader=r},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.Success=0]="Success";n[n.Error=1]="Error"})(i=t.TranslationStatus||(t.TranslationStatus={}))},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),u=function(){function n(){this.Get=function(n){if(!n)throw new r.ArgumentNullError("key");return localStorage.getItem(n)};this.GetOrAdd=function(n,t){if(!n)throw new r.ArgumentNullError("key");var i=localStorage.getItem(n);return(i===null||i===undefined)&&localStorage.setItem(n,t),localStorage.getItem(n)};this.Set=function(n,t){if(!n)throw new r.ArgumentNullError("key");localStorage.setItem(n,t)};this.Remove=function(n){if(!n)throw new r.ArgumentNullError("key");localStorage.removeItem(n)}}return n}();t.LocalStorage=u},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=i(0),r=i(1),f=function(){function n(n,t){var i=this;this.streams={};this.TurnOn=function(){var n,t,u,f;return i.initializeDeferral?i.initializeDeferral.Promise():(i.initializeDeferral=new r.Deferred,i.CreateAudioContext(),n=window.navigator,t=n.getUserMedia||n.webkitGetUserMedia||n.mozGetUserMedia||n.msGetUserMedia,!n.mediaDevices||(t=function(t,i,r){n.mediaDevices.getUserMedia(t).then(i).catch(r)}),t?(f=function(){i.OnEvent(new r.AudioSourceInitializingEvent(i.id));t({audio:!0,video:!1},function(n){i.mediaStream=n;i.OnEvent(new r.AudioSourceReadyEvent(i.id));i.initializeDeferral.Resolve(!0)},function(n){var t="Error occurred during microphone initialization: "+n,u=i.initializeDeferral;i.initializeDeferral=null;u.Reject(t);i.OnEvent(new r.AudioSourceErrorEvent(i.id,t))})},i.context.state==="suspended"?i.context.resume().then(f,function(n){i.initializeDeferral.Reject("Failed to initialize audio context: "+n)}):f()):(u="Browser does not support getUserMedia.",i.initializeDeferral.Reject(u),i.OnEvent(new r.AudioSourceErrorEvent(u,""))),i.initializeDeferral.Promise())};this.Id=function(){return i.id};this.Attach=function(n){return i.OnEvent(new r.AudioStreamNodeAttachingEvent(i.id,n)),i.Listen(n).OnSuccessContinueWith(function(t){return i.OnEvent(new r.AudioStreamNodeAttachedEvent(i.id,n)),{Detach:function(){t.Close();delete i.streams[n];i.OnEvent(new r.AudioStreamNodeDetachedEvent(i.id,n));i.TurnOff()},Id:function(){return n},Read:function(){return t.Read()}}})};this.Detach=function(n){n&&i.streams[n]&&(i.streams[n].Close(),delete i.streams[n],i.OnEvent(new r.AudioStreamNodeDetachedEvent(i.id,n)))};this.TurnOff=function(){var n,t;for(n in i.streams)n&&(t=i.streams[n],t&&t.Close());return i.OnEvent(new r.AudioSourceOffEvent(i.id)),i.initializeDeferral=null,i.DestroyAudioContext(),r.PromiseHelper.FromResult(!0)};this.Listen=function(n){return i.TurnOn().OnSuccessContinueWith(function(){var t=new r.Stream(n);i.streams[n]=t;try{i.recorder.Record(i.context,i.mediaStream,t)}catch(u){i.OnEvent(new r.AudioStreamNodeErrorEvent(i.id,n,u));throw u;}return t.GetReader()})};this.OnEvent=function(n){i.events.OnEvent(n);r.Events.Instance.OnEvent(n)};this.CreateAudioContext=function(){if(!i.context){var n=window.AudioContext||window.webkitAudioContext||!1;if(!n)throw new Error("Browser does not support Web Audio API (AudioContext is not available).");i.context=new n}};this.DestroyAudioContext=function(){i.context&&(i.recorder.ReleaseMediaResources(i.context),"close"in i.context?(i.context.close(),i.context=null):i.context.state==="running"&&i.context.suspend())};this.id=t?t:r.CreateNoDashGuid();this.events=new r.EventSource;this.recorder=n}return Object.defineProperty(n.prototype,"Format",{get:function(){return n.AUDIOFORMAT},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Events",{get:function(){return this.events},enumerable:!0,configurable:!0}),n.AUDIOFORMAT=u.AudioStreamFormat.getDefaultInputFormat(),n}();t.MicAudioSource=f},function(n,t,i){"use strict";var o=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r;Object.defineProperty(t,"__esModule",{value:!0});var u=i(6),f=i(0),s=i(16),e=function(){function n(){}return n.fromDefaultMicrophoneInput=function(){var n=new u.PcmRecorder;return new r(new u.MicAudioSource(n))},n.fromWavFileInput=function(n){return new r(new u.FileAudioSource(n))},n.fromStreamInput=function(n){if(n instanceof f.PullAudioInputStreamCallback)return new r(new s.PullAudioInputStreamImpl(n));if(n instanceof f.AudioInputStream)return new r(n);throw new Error("Not Supported Type");},n}();t.AudioConfig=e;r=function(n){function t(t){var i=n.call(this)||this;return i.source=t,i}return o(t,n),Object.defineProperty(t.prototype,"Format",{get:function(){return this.source.Format},enumerable:!0,configurable:!0}),t.prototype.close=function(){this.source.TurnOff()},t.prototype.Id=function(){return this.source.Id()},t.prototype.TurnOn=function(){return this.source.TurnOn()},t.prototype.Attach=function(n){return this.source.Attach(n)},t.prototype.Detach=function(n){return this.Detach(n)},t.prototype.TurnOff=function(){return this.source.TurnOff()},Object.defineProperty(t.prototype,"Events",{get:function(){return this.source.Events},enumerable:!0,configurable:!0}),t}(e);t.AudioConfigImpl=r},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.Error=0]="Error";n[n.EndOfStream=1]="EndOfStream"})(i=t.CancellationReason||(t.CancellationReason={}))},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){}return n}();t.PullAudioInputStreamCallback=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(4),u=function(){function n(){this.disposed=!1}return n.fromFile=function(n){r.Contracts.throwIfFileDoesNotExist(n,"fileName");throw new Error("Not yet implemented.");},n.fromStream=function(n){r.Contracts.throwIfNull(n,"file");throw new Error("Not yet implemented.");},n.prototype.close=function(){this.disposed||(this.disposed=!0)},n}();t.KeywordRecognitionModel=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n){this.privSessionId=n}return Object.defineProperty(n.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!0,configurable:!0}),n}();t.SessionEventArgs=i},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=function(n){function t(t,i){var r=n.call(this,i)||this;return r.privOffset=t,r}return f(t,n),Object.defineProperty(t.prototype,"offset",{get:function(){return this.privOffset},enumerable:!0,configurable:!0}),t}(r.SessionEventArgs);t.RecognitionEventArgs=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.Simple=0]="Simple";n[n.Detailed=1]="Detailed"})(i=t.OutputFormat||(t.OutputFormat={}))},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=function(n){function t(t,i,r){var u=n.call(this,i,r)||this;return u.privResult=t,u}return f(t,n),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!0,configurable:!0}),t}(r.RecognitionEventArgs);t.IntentRecognitionEventArgs=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t,i,r,u,f,e,o){this.privResultId=n;this.privReason=t;this.privText=i;this.privDuration=r;this.privOffset=u;this.privErrorDetails=f;this.privJson=e;this.privProperties=o}return Object.defineProperty(n.prototype,"resultId",{get:function(){return this.privResultId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this.privText},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return this.privDuration},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"offset",{get:function(){return this.privOffset},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"json",{get:function(){return this.privJson},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"properties",{get:function(){return this.privProperties},enumerable:!0,configurable:!0}),n}();t.RecognitionResult=i},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=function(n){function t(t,i,r,u,f,e,o,s){return n.call(this,t,i,r,u,f,e,o,s)||this}return f(t,n),t}(r.RecognitionResult);t.SpeechRecognitionResult=u},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=function(n){function t(t,i,r,u,f,e,o,s,h){var c=n.call(this,i,r,u,f,e,o,s,h)||this;return c.privIntentId=t,c}return f(t,n),Object.defineProperty(t.prototype,"intentId",{get:function(){return this.privIntentId},enumerable:!0,configurable:!0}),t}(r.SpeechRecognitionResult);t.IntentRecognitionResult=u},function(n,t,i){"use strict";var e=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,f,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(4);f=function(){function n(){}return n.fromEndpoint=function(n){var t,i,f;if(r.Contracts.throwIfNull(n,"uri"),r.Contracts.throwIfNullOrWhitespace(n.hostname,"uri"),t=new u,i=n.host.indexOf("."),-1===i)throw new Error("Could not determine region from endpoint");if(t.region=n.host.substr(0,i),f=n.pathname.lastIndexOf("/")+1,-1===f)throw new Error("Could not determine appId from endpoint");if(t.appId=n.pathname.substr(f),t.subscriptionKey=n.searchParams.get("subscription-key"),undefined===t.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return t},n.fromAppId=function(n){r.Contracts.throwIfNullOrWhitespace(n,"appId");var t=new u;return t.appId=n,t},n.fromSubscription=function(n,t,i){r.Contracts.throwIfNullOrWhitespace(n,"subscriptionKey");r.Contracts.throwIfNullOrWhitespace(t,"appId");r.Contracts.throwIfNullOrWhitespace(i,"region");var f=new u;return f.appId=t,f.region=i,f.subscriptionKey=n,f},n}();t.LanguageUnderstandingModel=f;u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return e(t,n),t}(f);t.LanguageUnderstandingModelImpl=u},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=function(n){function t(t,i,r){var u=n.call(this,i,r)||this;return u.privResult=t,u}return f(t,n),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!0,configurable:!0}),t}(r.RecognitionEventArgs);t.SpeechRecognitionEventArgs=u},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=function(n){function t(t,i,r,u){var f=n.call(this,r,u)||this;return f.privReason=t,f.privErrorDetails=i,f}return f(t,n),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!0,configurable:!0}),t}(r.RecognitionEventArgs);t.SpeechRecognitionCanceledEventArgs=u},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=function(n){function t(t,i,r){var u=n.call(this,i,r)||this;return u.privResult=t,u}return f(t,n),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!0,configurable:!0}),t}(r.RecognitionEventArgs);t.TranslationRecognitionEventArgs=u},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=function(n){function t(t,i){var r=n.call(this,i)||this;return r.privResult=t,r}return f(t,n),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!0,configurable:!0}),t}(r.SessionEventArgs);t.TranslationSynthesisEventArgs=u},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=function(n){function t(t,i,r,u,f,e,o,s,h){var c=n.call(this,i,r,u,f,e,o,s,h)||this;return c.privTranslations=t,c}return f(t,n),Object.defineProperty(t.prototype,"translations",{get:function(){return this.privTranslations},enumerable:!0,configurable:!0}),t}(r.SpeechRecognitionResult);t.TranslationRecognitionResult=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t){this.privReason=n;this.privAudio=t}return Object.defineProperty(n.prototype,"audio",{get:function(){return this.privAudio},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),n}();t.TranslationSynthesisResult=i},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.NoMatch=0]="NoMatch";n[n.Canceled=1]="Canceled";n[n.RecognizingSpeech=2]="RecognizingSpeech";n[n.RecognizedSpeech=3]="RecognizedSpeech";n[n.RecognizingIntent=4]="RecognizingIntent";n[n.RecognizedIntent=5]="RecognizedIntent";n[n.TranslatingSpeech=6]="TranslatingSpeech";n[n.TranslatedSpeech=7]="TranslatedSpeech";n[n.SynthesizingAudio=8]="SynthesizingAudio";n[n.SynthesizingAudioCompleted=9]="SynthesizingAudioCompleted"})(i=t.ResultReason||(t.ResultReason={}))},function(n,t,i){"use strict";var s=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(2),u=i(4),r=i(0),o=function(){function n(){}return n.fromSubscription=function(n,t){u.Contracts.throwIfNullOrWhitespace(n,"subscriptionKey");u.Contracts.throwIfNullOrWhitespace(t,"region");var i=new f;return i.setProperty(r.PropertyId.SpeechServiceConnection_Region,t),i.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,t),i.setProperty(r.PropertyId.SpeechServiceConnection_Key,n),i},n.fromEndpoint=function(n,t){u.Contracts.throwIfNull(n,"endpoint");u.Contracts.throwIfNullOrWhitespace(t,"subscriptionKey");var i=new f;return i.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,n.href),i.setProperty(r.PropertyId.SpeechServiceConnection_Key,t),i},n.fromAuthorizationToken=function(n,t){u.Contracts.throwIfNull(n,"authorizationToken");u.Contracts.throwIfNullOrWhitespace(t,"region");var i=new f;return i.setProperty(r.PropertyId.SpeechServiceConnection_Region,t),i.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,t),i.authorizationToken=n,i},n.prototype.close=function(){},n}();t.SpeechConfig=o;f=function(n){function t(){var t=n.call(this)||this;return t.privProperties=new r.PropertyCollection,t.speechRecognitionLanguage="en-US",t.outputFormat=r.OutputFormat.Simple,t}return s(t,n),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPoint",{get:function(){return new URL(this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subscriptionKey",{get:function(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"region",{get:function(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)},set:function(n){this.privProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)},set:function(n){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return r.OutputFormat[this.privProperties.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple])]},set:function(n){this.privProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[n])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endpointId",{get:function(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)},set:function(n){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,n)},enumerable:!0,configurable:!0}),t.prototype.setProperty=function(n,t){u.Contracts.throwIfNullOrWhitespace(t,"value");this.privProperties.setProperty(n,t)},t.prototype.getProperty=function(n,t){return this.privProperties.getProperty(n,t)},t.prototype.clone=function(){var n=new t;return n.privProperties=this.privProperties.clone(),n},t}(o);t.SpeechConfigImpl=f},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),u=i(9),f="Ocp-Apim-Subscription-Key",e=function(){function n(n){var t=this;if(this.Fetch=function(){return r.PromiseHelper.FromResult(t.authInfo)},this.FetchOnExpiry=function(){return r.PromiseHelper.FromResult(t.authInfo)},!n)throw new r.ArgumentNullError("subscriptionKey");this.authInfo=new u.AuthInfo(f,n)}return n}();t.CognitiveSubscriptionKeyAuthentication=e},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),u=i(9),f="Authorization",e=function(){function n(n,t){var i=this;if(this.Fetch=function(n){return i.fetchCallback(n).OnSuccessContinueWith(function(n){return new u.AuthInfo(f,n)})},this.FetchOnExpiry=function(n){return i.fetchOnExpiryCallback(n).OnSuccessContinueWith(function(n){return new u.AuthInfo(f,n)})},!n)throw new r.ArgumentNullError("fetchCallback");if(!t)throw new r.ArgumentNullError("fetchOnExpiryCallback");this.fetchCallback=n;this.fetchOnExpiryCallback=t}return n}();t.CognitiveTokenAuthentication=e},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=i(6),r=i(1),u=i(0),e=i(2),o="testhooks",s="X-ConnectionId",h=function(){function n(){var n=this;this.Create=function(t,i,h){var l=t.parameters.getProperty(u.PropertyId.SpeechServiceConnection_Endpoint),v,a,c;return l||(v=t.parameters.getProperty(u.PropertyId.SpeechServiceConnection_IntentRegion),l=n.Host()+r.Storage.Local.GetOrAdd("TranslationRelativeUri","/speech/"+n.GetSpeechRegionFromIntentRegion(v)+"/recognition/interactive/cognitiveservices/v1")),a={format:"simple",language:t.parameters.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage)},n.IsDebugModeEnabled&&(a[o]="1"),c={},c[i.HeaderName]=i.Token,c[s]=h,new f.WebsocketConnection(l,a,c,new e.WebsocketMessageFormatter,h)}}return n.prototype.Host=function(){return r.Storage.Local.GetOrAdd("Host","wss://speech.platform.bing.com")},Object.defineProperty(n.prototype,"IsDebugModeEnabled",{get:function(){var n=r.Storage.Local.GetOrAdd("IsDebugModeEnabled","false");return n.toLowerCase()==="true"},enumerable:!0,configurable:!0}),n.prototype.GetSpeechRegionFromIntentRegion=function(n){switch(n){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return n}},n}();t.IntentConnectionFactory=h},function(n,t,i){"use strict";var e=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),a,s,v,y,l;Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),f=i(0),h=i(2),u=i(7),w=i(59),o=i(60),c=function(){function n(n,t,i,u){var f=this;if(this.Recognize=function(n,t){var i=f.GetSession(f.audioSource.Id(),n);return i.ListenForServiceTelemetry(f.audioSource.Events),f.audioSource.Attach(i.AudioNodeId).ContinueWithPromise(function(n){if(n.IsError){i.OnAudioSourceAttachCompleted(null,!0,n.Error);throw new Error(n.Error);}else i.OnAudioSourceAttachCompleted(n.Result,!1);var u=n.Result;return f.FetchConnection(i).OnSuccessContinueWithPromise(function(n){var o=f.ReceiveMessage(n,i),s=f.SendSpeechConfig(i.RequestId,n,f.recognizerConfig.PlatformConfig.Serialize()).OnSuccessContinueWithPromise(function(){return f.SendSpeechContext(i.RequestId,n,t).OnSuccessContinueWithPromise(function(){return f.SendAudio(i.RequestId,n,u,i)})}),e=r.PromiseHelper.WhenAll([o,s]);return e.On(function(){i.Dispose();f.SendTelemetryData(i.RequestId,n,i.GetTelemetry())},function(t){i.Dispose(t);f.SendTelemetryData(i.RequestId,n,i.GetTelemetry())}),e}).OnSuccessContinueWithPromise(function(){return i.CompletionPromise})})},this.SendTelemetryData=function(n,t,i){return t.Send(new o.SpeechConnectionMessage(r.MessageType.Text,"telemetry",n,"application/json",i))},this.FetchConnection=function(n,t){if(t===void 0&&(t=!1),f.connectionFetchPromise)return f.connectionFetchPromise.Result().IsError||f.connectionFetchPromise.Result().Result.State()===r.ConnectionState.Disconnected?(f.connectionId=null,f.connectionFetchPromise=null,f.FetchConnection(n)):(n.OnPreConnectionStart(f.authFetchEventId,f.connectionId),n.OnConnectionEstablishCompleted(200),n.ListenForServiceTelemetry(f.connectionFetchPromise.Result().Result.Events),f.connectionFetchPromise);f.authFetchEventId=r.CreateNoDashGuid();f.connectionId=r.CreateNoDashGuid();n.OnPreConnectionStart(f.authFetchEventId,f.connectionId);var i=t?f.authentication.FetchOnExpiry(f.authFetchEventId):f.authentication.Fetch(f.authFetchEventId);return f.connectionFetchPromise=i.ContinueWithPromise(function(i){if(i.IsError){n.OnAuthCompleted(!0,i.Error);throw new Error(i.Error);}else n.OnAuthCompleted(!1);return f.connection&&(f.connection.Dispose(),f.connection=undefined),f.connection=f.connectionFactory.Create(f.recognizerConfig,i.Result,f.connectionId),n.ListenForServiceTelemetry(f.connection.Events),f.connection.Open().OnSuccessContinueWithPromise(function(i){return i.StatusCode===200?(n.OnConnectionEstablishCompleted(i.StatusCode),r.PromiseHelper.FromResult(f.connection)):i.StatusCode!==403||t?(n.OnConnectionEstablishCompleted(i.StatusCode,i.Reason),r.PromiseHelper.FromError("Unable to contact server. StatusCode: "+i.StatusCode+", Reason: "+i.Reason)):f.FetchConnection(n,!0)})}),f.connectionFetchPromise},this.ReceiveMessage=function(n,t){return n.Read().OnSuccessContinueWithPromise(function(i){if(!i)return r.PromiseHelper.FromResult(!0);var u=o.SpeechConnectionMessage.FromConnectionMessage(i);if(u.RequestId.toLowerCase()===t.RequestId.toLowerCase())switch(u.Path.toLowerCase()){case"turn.start":t.OnServiceTurnStartResponse(JSON.parse(u.TextBody));break;case"speech.startdetected":t.OnServiceSpeechStartDetectedResponse(JSON.parse(u.TextBody));break;case"speech.fragment":t.OnServiceSpeechFragmentResponse(JSON.parse(u.TextBody));break;case"speech.enddetected":u.TextBody.length>0?t.OnServiceSpeechEndDetectedResponse(JSON.parse(u.TextBody)):t.OnServiceSpeechEndDetectedResponse({Offset:0});break;case"turn.end":return t.OnServiceTurnEndResponse(),r.PromiseHelper.FromResult(!0);default:f.ProcessTypeSpecificMessages(u,t,n)}return f.ReceiveMessage(n,t)})},this.SendSpeechConfig=function(n,t,i){return i&&f.connectionId!==f.speechConfigConnectionId?(f.speechConfigConnectionId=f.connectionId,t.Send(new o.SpeechConnectionMessage(r.MessageType.Text,"speech.config",n,"application/json",i))):r.PromiseHelper.FromResult(!0)},this.SendSpeechContext=function(n,t,i){return i?t.Send(new o.SpeechConnectionMessage(r.MessageType.Text,"speech.context",n,"application/json",i)):r.PromiseHelper.FromResult(!0)},this.SendAudio=function(n,t,i,u){var e=new r.Deferred,s=0,c=f.audioSource.Format,h=function(){f.isDisposed||u.IsSpeechEnded||u.IsCompleted||i.Read().On(function(i){var f,l,a,v;if(u.IsSpeechEnded){e.Resolve(!0);return}f=i.IsEnd?null:i.Buffer;l=t.Send(new o.SpeechConnectionMessage(r.MessageType.Binary,"audio",n,null,f));i.IsEnd?e.Resolve(!0):(a=f.byteLength/c.avgBytesPerSec*500,v=Math.max(0,s-Date.now()+a),l.OnSuccessContinueWith(function(n){setTimeout(function(){s=Date.now();h(n)},v)}))},function(n){u.IsSpeechEnded?e.Resolve(!0):e.Reject(n)})};return h(!0),e.Promise()},!n)throw new r.ArgumentNullError("authentication");if(!t)throw new r.ArgumentNullError("connectionFactory");if(!i)throw new r.ArgumentNullError("audioSource");if(!u)throw new r.ArgumentNullError("recognizerConfig");this.authentication=n;this.connectionFactory=t;this.audioSource=i;this.recognizerConfig=u;this.isDisposed=!1}return Object.defineProperty(n.prototype,"AudioSource",{get:function(){return this.audioSource},enumerable:!0,configurable:!0}),n.prototype.IsDisposed=function(){return this.isDisposed},n.prototype.Dispose=function(n){this.isDisposed=!0;this.connection&&(this.connection.Dispose(n),this.connection=undefined)},n}();t.ServiceRecognizerBase=c;a=function(n){function t(t,i,r,u){return n.call(this,t,i,r,u)||this}return e(t,n),t.prototype.GetSession=function(n,t){return new p(n,t)},t.prototype.ProcessTypeSpecificMessages=function(n,t,i){var r=t;switch(n.Path.toLowerCase()){case"speech.hypothesis":r.OnServiceSpeechHypothesisResponse(JSON.parse(n.TextBody));break;case"speech.phrase":this.recognizerConfig.IsContinuousRecognition&&this.SendTelemetryData(r.RequestId,i,r.GetTelemetry());this.recognizerConfig.parameters.getProperty(h.OutputFormatPropertyName)===f.OutputFormat[f.OutputFormat.Simple]?r.OnServiceSimpleSpeechPhraseResponse(JSON.parse(n.TextBody)):r.OnServiceDetailedSpeechPhraseResponse(JSON.parse(n.TextBody))}},t}(c);t.SpeechServiceRecognizer=a,function(n){n[n.Success=0]="Success";n[n.SynthesisEnd=1]="SynthesisEnd";n[n.Error=2]="Error"}(s||(s={}));v=function(n){function t(t,i,r,u){return n.call(this,t,i,r,u)||this}return e(t,n),t.prototype.GetSession=function(n,t){return new b(n,t)},t.prototype.ProcessTypeSpecificMessages=function(n,t,i){var u=t;switch(n.Path.toLowerCase()){case"translation.hypothesis":u.OnServiceTranslationHypothesisResponse(JSON.parse(n.TextBody));break;case"translation.phrase":this.recognizerConfig.IsContinuousRecognition&&this.SendTelemetryData(u.RequestId,i,u.GetTelemetry());var o=JSON.parse(n.TextBody),c=""+o.RecognitionStatus,l=h.RecognitionStatus2[c];if(l===h.RecognitionStatus2.Success){r.TranslationStatus[o.Translation.TranslationStatus]===r.TranslationStatus.Success?u.OnServiceTranslationPhraseResponse(o):u.OnServiceTranslationErrorResponse(o);break}else u.OnServiceRecognitionErrorResponse(JSON.parse(n.TextBody));break;case"translation.synthesis":this.recognizerConfig.IsContinuousRecognition&&this.SendTelemetryData(u.RequestId,i,u.GetTelemetry());u.OnServiceTranslationSynthesis(n.BinaryBody);break;case"translation.synthesis.end":this.recognizerConfig.IsContinuousRecognition&&this.SendTelemetryData(u.RequestId,i,u.GetTelemetry());var e=JSON.parse(n.TextBody),a=""+e.SynthesisStatus,v=s[a];switch(v){case s.Error:e.SynthesisStatus=f.ResultReason.Canceled;u.OnServiceTranslationSynthesisError(e);break;case s.Success:e.SynthesisStatus=f.ResultReason.SynthesizingAudio;u.OnServiceTranslationSynthesis(undefined);break;default:e.SynthesisStatus=f.ResultReason.SynthesizingAudioCompleted}}},t}(c);t.TranslationServiceRecognizer=v;y=function(n){function t(t,i,r,u){return n.call(this,t,i,r,u)||this}return e(t,n),t.prototype.GetSession=function(n,t){return new k(n,t)},t.prototype.ProcessTypeSpecificMessages=function(n,t,i){var r=t;switch(n.Path.toLowerCase()){case"speech.hypothesis":r.OnServiceSpeechHypothesisResponse(JSON.parse(n.TextBody));break;case"speech.phrase":this.recognizerConfig.IsContinuousRecognition&&this.SendTelemetryData(r.RequestId,i,r.GetTelemetry());this.recognizerConfig.parameters.getProperty(h.OutputFormatPropertyName)===f.OutputFormat[f.OutputFormat.Simple]?r.OnServiceSimpleSpeechPhraseResponse(JSON.parse(n.TextBody)):r.OnServiceDetailedSpeechPhraseResponse(JSON.parse(n.TextBody));break;case"response":this.recognizerConfig.IsContinuousRecognition&&this.SendTelemetryData(r.RequestId,i,r.GetTelemetry());n.TextBody===""?r.OnServiceIntentResponse(null):r.OnServiceIntentResponse(JSON.parse(n.TextBody))}},t}(c);t.IntentServiceRecognizer=y;l=function(){function n(n,t){var i=this;this.isDisposed=!1;this.detachables=[];this.isAudioNodeDetached=!1;this.isCompleted=!1;this.OnAudioSourceAttachCompleted=function(n,t,r){i.audioNode=n;t?i.OnComplete(u.RecognitionCompletionStatus.AudioSourceError,r):i.OnEvent(new u.ListeningStartedEvent(i.requestId,i.sessionId,i.audioSourceId,i.audioNodeId))};this.OnPreConnectionStart=function(n,t){i.authFetchEventId=n;i.sessionId=t;i.OnEvent(new u.ConnectingToServiceEvent(i.requestId,i.authFetchEventId,i.sessionId))};this.OnAuthCompleted=function(n,t){n&&i.OnComplete(u.RecognitionCompletionStatus.AuthTokenFetchError,t)};this.OnConnectionEstablishCompleted=function(n,t){if(n===200){i.OnEvent(new u.RecognitionStartedEvent(i.RequestId,i.audioSourceId,i.audioNodeId,i.authFetchEventId,i.sessionId));return}n===403?i.OnComplete(u.RecognitionCompletionStatus.UnAuthorized,t):i.OnComplete(u.RecognitionCompletionStatus.ConnectError,t)};this.OnServiceTurnStartResponse=function(n){n&&n.context&&n.context.serviceTag&&(i.serviceTag=n.context.serviceTag)};this.OnServiceSpeechStartDetectedResponse=function(n){i.OnEvent(new u.SpeechStartDetectedEvent(i.RequestId,i.sessionId,n))};this.OnServiceSpeechFragmentResponse=function(n){i.OnEvent(new u.SpeechFragmentEvent(i.RequestId,i.sessionId,n))};this.OnServiceSpeechEndDetectedResponse=function(n){i.DetachAudioNode();i.OnEvent(new u.SpeechEndDetectedEvent(i.RequestId,i.sessionId,n))};this.OnServiceTurnEndResponse=function(){i.OnComplete(u.RecognitionCompletionStatus.Success)};this.OnConnectionError=function(n){i.OnComplete(u.RecognitionCompletionStatus.UnknownError,n)};this.Dispose=function(){var n,t,r;if(!i.isDisposed){for(i.isDisposed=!0,n=0,t=i.detachables;n<t.length;n++)r=t[n],r.Detach();i.serviceTelemetryListener.Dispose()}};this.GetTelemetry=function(){return i.serviceTelemetryListener.GetTelemetry()};this.OnEvent=function(n){if(i.serviceTelemetryListener.OnEvent(n),r.Events.Instance.OnEvent(n),i.onEventCallback)i.onEventCallback(n)};this.OnComplete=function(n,t){i.isCompleted||(i.isCompleted=!0,i.DetachAudioNode(),i.OnEvent(new u.RecognitionEndedEvent(i.RequestId,i.audioSourceId,i.audioNodeId,i.authFetchEventId,i.sessionId,i.serviceTag,n,t?t:"")))};this.DetachAudioNode=function(){i.isAudioNodeDetached||(i.isAudioNodeDetached=!0,i.audioNode&&i.audioNode.Detach())};this.audioSourceId=n;this.onEventCallback=t;this.requestId=r.CreateNoDashGuid();this.audioNodeId=r.CreateNoDashGuid();this.requestCompletionDeferral=new r.Deferred;this.serviceTelemetryListener=new w.ServiceTelemetryListener(this.requestId,this.audioSourceId,this.audioNodeId);this.OnEvent(new u.RecognitionTriggeredEvent(this.RequestId,this.sessionId,this.audioSourceId,this.audioNodeId))}return Object.defineProperty(n.prototype,"RequestId",{get:function(){return this.requestId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"AudioNodeId",{get:function(){return this.audioNodeId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CompletionPromise",{get:function(){return this.requestCompletionDeferral.Promise()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"IsSpeechEnded",{get:function(){return this.isAudioNodeDetached},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"IsCompleted",{get:function(){return this.isCompleted},enumerable:!0,configurable:!0}),n.prototype.ListenForServiceTelemetry=function(n){this.detachables.push(n.AttachListener(this.serviceTelemetryListener))},n}();t.RequestSessionBase=l;var p=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.OnServiceSpeechHypothesisResponse=function(n){r.OnEvent(new u.SpeechHypothesisEvent(r.RequestId,r.sessionId,n))},r.OnServiceSimpleSpeechPhraseResponse=function(n){r.OnEvent(new u.SpeechSimplePhraseEvent(r.RequestId,r.sessionId,n))},r.OnServiceDetailedSpeechPhraseResponse=function(n){r.OnEvent(new u.SpeechDetailedPhraseEvent(r.RequestId,r.sessionId,n))},r}return e(t,n),t}(l),b=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.OnServiceTranslationHypothesisResponse=function(n){r.OnEvent(new u.TranslationHypothesisEvent(r.RequestId,r.sessionId,n))},r.OnServiceTranslationPhraseResponse=function(n){r.OnEvent(new u.TranslationPhraseEvent(r.RequestId,r.sessionId,n))},r.OnServiceTranslationErrorResponse=function(n){r.OnEvent(new u.TranslationFailedEvent(r.RequestId,r.sessionId,n))},r.OnServiceRecognitionErrorResponse=function(n){r.OnEvent(new u.RecognitionFailedEvent(r.RequestId,r.sessionId,n))},r.OnServiceTranslationSynthesis=function(n){r.OnEvent(new u.TranslationSynthesisEvent(r.RequestId,r.sessionId,n))},r.OnServiceTranslationSynthesisError=function(n){r.OnEvent(new u.TranslationSynthesisErrorEvent(r.RequestId,r.sessionId,n))},r}return e(t,n),t}(l),k=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.OnServiceIntentResponse=function(n){r.OnEvent(new u.IntentResponseEvent(r.RequestId,r.sessionId,n))},r}return e(t,n),t}(p)},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),u=i(7),f=function(){function n(n,t,i){var f=this;this.isDisposed=!1;this.listeningTriggerMetric=null;this.micMetric=null;this.connectionEstablishMetric=null;this.OnEvent=function(n){f.isDisposed||(n instanceof u.RecognitionTriggeredEvent&&n.RequestId===f.requestId&&(f.listeningTriggerMetric={End:n.EventTime,Name:"ListeningTrigger",Start:n.EventTime}),n instanceof r.AudioStreamNodeAttachingEvent&&n.AudioSourceId===f.audioSourceId&&n.AudioNodeId===f.audioNodeId&&(f.micStartTime=n.EventTime),n instanceof r.AudioStreamNodeAttachedEvent&&n.AudioSourceId===f.audioSourceId&&n.AudioNodeId===f.audioNodeId&&(f.micStartTime=n.EventTime),n instanceof r.AudioSourceErrorEvent&&n.AudioSourceId===f.audioSourceId&&(f.micMetric||(f.micMetric={End:n.EventTime,Error:n.Error,Name:"Microphone",Start:f.micStartTime})),n instanceof r.AudioStreamNodeErrorEvent&&n.AudioSourceId===f.audioSourceId&&n.AudioNodeId===f.audioNodeId&&(f.micMetric||(f.micMetric={End:n.EventTime,Error:n.Error,Name:"Microphone",Start:f.micStartTime})),n instanceof r.AudioStreamNodeDetachedEvent&&n.AudioSourceId===f.audioSourceId&&n.AudioNodeId===f.audioNodeId&&(f.micMetric||(f.micMetric={End:n.EventTime,Name:"Microphone",Start:f.micStartTime})),n instanceof u.ConnectingToServiceEvent&&n.RequestId===f.requestId&&(f.connectionId=n.SessionId),n instanceof r.ConnectionStartEvent&&n.ConnectionId===f.connectionId&&(f.connectionStartTime=n.EventTime),n instanceof r.ConnectionEstablishedEvent&&n.ConnectionId===f.connectionId&&(f.connectionEstablishMetric||(f.connectionEstablishMetric={End:n.EventTime,Id:f.connectionId,Name:"Connection",Start:f.connectionStartTime})),n instanceof r.ConnectionEstablishErrorEvent&&n.ConnectionId===f.connectionId&&(f.connectionEstablishMetric||(f.connectionEstablishMetric={End:n.EventTime,Error:f.GetConnectionError(n.StatusCode),Id:f.connectionId,Name:"Connection",Start:f.connectionStartTime})),n instanceof r.ConnectionMessageReceivedEvent&&n.ConnectionId===f.connectionId&&n.Message&&n.Message.Headers&&n.Message.Headers.path&&(f.receivedMessages[n.Message.Headers.path]||(f.receivedMessages[n.Message.Headers.path]=[]),f.receivedMessages[n.Message.Headers.path].push(n.NetworkReceivedTime)))};this.GetTelemetry=function(){var n=[],t,i;return f.listeningTriggerMetric&&n.push(f.listeningTriggerMetric),f.micMetric&&n.push(f.micMetric),f.connectionEstablishMetric&&n.push(f.connectionEstablishMetric),t={Metrics:n,ReceivedMessages:f.receivedMessages},i=JSON.stringify(t),f.receivedMessages={},f.listeningTriggerMetric=null,f.micMetric=null,f.connectionEstablishMetric=null,i};this.Dispose=function(){f.isDisposed=!0};this.GetConnectionError=function(n){switch(n){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+n.toString()}};this.requestId=n;this.audioSourceId=t;this.audioNodeId=i;this.receivedMessages={}}return n}();t.ServiceTelemetryListener=f},function(n,t,i){"use strict";var s=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),u="path",f="content-type",e="x-requestid",o="x-timestamp",h=function(n){function t(t,i,s,h,c,l,a){var y=this,v,p;if(!i)throw new r.ArgumentNullError("path");if(!s)throw new r.ArgumentNullError("requestId");if(v={},v[u]=i,v[e]=s,v[o]=(new Date).toISOString(),h&&(v[f]=h),l)for(p in l)p&&(v[p]=l[p]);return y=a?n.call(this,t,c,v,a)||this:n.call(this,t,c,v)||this,y.path=i,y.requestId=s,y.contentType=h,y.additionalHeaders=l,y}return s(t,n),Object.defineProperty(t.prototype,"Path",{get:function(){return this.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"RequestId",{get:function(){return this.requestId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ContentType",{get:function(){return this.contentType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AdditionalHeaders",{get:function(){return this.additionalHeaders},enumerable:!0,configurable:!0}),t.FromConnectionMessage=function(n){var r=null,s=null,h=null,l=null,c={},i;if(n.Headers)for(i in n.Headers)i&&(i.toLowerCase()===u.toLowerCase()?r=n.Headers[i]:i.toLowerCase()===e.toLowerCase()?s=n.Headers[i]:i.toLowerCase()===o.toLowerCase()?l=n.Headers[i]:i.toLowerCase()===f.toLowerCase()?h=n.Headers[i]:c[i]=n.Headers[i]);return new t(n.MessageType,r,s,h,n.Body,c,n.Id)},t}(r.ConnectionMessage);t.SpeechConnectionMessage=h},function(n,t){"use strict";var i,h,e,r,u,f,o,s;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n[n.Interactive=0]="Interactive";n[n.Conversation=1]="Conversation";n[n.Dictation=2]="Dictation"}(i=t.RecognitionMode||(t.RecognitionMode={})),function(n){n[n.Simple=0]="Simple";n[n.Detailed=1]="Detailed"}(h=t.SpeechResultFormat||(t.SpeechResultFormat={}));e=function(){function n(n,t,f){t===void 0&&(t=i.Interactive);this.recognitionMode=i.Interactive;this.platformConfig=n?n:new r(new u(null,null));this.recognitionMode=t;this.recognitionActivityTimeout=t===i.Interactive?8e3:25e3;this.speechConfig=f}return Object.defineProperty(n.prototype,"parameters",{get:function(){return this.speechConfig},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"RecognitionMode",{get:function(){return this.recognitionMode},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"PlatformConfig",{get:function(){return this.platformConfig},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"RecognitionActivityTimeout",{get:function(){return this.recognitionActivityTimeout},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"IsContinuousRecognition",{get:function(){return this.recognitionMode!==i.Interactive},enumerable:!0,configurable:!0}),n}();t.RecognizerConfig=e;r=function(){function n(n){var t=this;this.Serialize=function(){return JSON.stringify(t,function(n,t){var r,i;if(t&&typeof t=="object"){r={};for(i in t)Object.hasOwnProperty.call(t,i)&&(r[i&&i.charAt(0).toLowerCase()+i.substring(1)]=t[i]);return r}return t})};this.context=n}return Object.defineProperty(n.prototype,"Context",{get:function(){return this.context},enumerable:!0,configurable:!0}),n}();t.PlatformConfig=r;u=function(){function n(n,t){this.system=new f;this.os=n;this.device=t}return Object.defineProperty(n.prototype,"System",{get:function(){return this.system},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OS",{get:function(){return this.os},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Device",{get:function(){return this.device},enumerable:!0,configurable:!0}),n}();t.Context=u;f=function(){function n(){this.version="1.0.00000"}return Object.defineProperty(n.prototype,"Version",{get:function(){return this.version},enumerable:!0,configurable:!0}),n}();t.System=f;o=function(){function n(n,t,i){this.platform=n;this.name=t;this.version=i}return Object.defineProperty(n.prototype,"Platform",{get:function(){return this.platform},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Name",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Version",{get:function(){return this.version},enumerable:!0,configurable:!0}),n}();t.OS=o;s=function(){function n(n,t,i){this.manufacturer=n;this.model=t;this.version=i}return Object.defineProperty(n.prototype,"Manufacturer",{get:function(){return this.manufacturer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Model",{get:function(){return this.model},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Version",{get:function(){return this.version},enumerable:!0,configurable:!0}),n}();t.Device=s},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.Success=0]="Success";n[n.NoMatch=1]="NoMatch";n[n.InitialSilenceTimeout=2]="InitialSilenceTimeout";n[n.BabbleTimeout=3]="BabbleTimeout";n[n.Error=4]="Error";n[n.EndOfDictation=5]="EndOfDictation"})(i=t.RecognitionStatus2||(t.RecognitionStatus2={}))},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),u="\r\n",f=function(){function n(){var n=this;this.ToConnectionMessage=function(t){var e=new r.Deferred,i,c,f,l,h;try{if(t.MessageType===r.MessageType.Text){var a=t.TextContent,o={},s=null;a&&(i=a.split("\r\n\r\n"),i&&i.length>0&&(o=n.ParseHeaders(i[0]),i.length>1&&(s=i[1])));e.Resolve(new r.ConnectionMessage(t.MessageType,s,o,t.Id))}else if(t.MessageType===r.MessageType.Binary){var u=t.BinaryContent,o={},s=null;if(!u||u.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");if(c=new DataView(u),f=c.getInt16(0),u.byteLength<f+2)throw new Error("Invalid binary message format. Header content missing.");for(l="",h=0;h<f;h++)l+=String.fromCharCode(c.getInt8(h+2));o=n.ParseHeaders(l);u.byteLength>f+2&&(s=u.slice(2+f));e.Resolve(new r.ConnectionMessage(t.MessageType,s,o,t.Id))}}catch(v){e.Reject("Error formatting the message. Error: "+v)}return e.Promise()};this.FromConnectionMessage=function(t){var e=new r.Deferred,o,c,i;try{if(t.MessageType===r.MessageType.Text)o=""+n.MakeHeaders(t)+u+(t.TextBody?t.TextBody:""),e.Resolve(new r.RawWebsocketMessage(r.MessageType.Text,o,t.Id));else if(t.MessageType===r.MessageType.Binary){var l=n.MakeHeaders(t),s=t.BinaryBody,f=new Int8Array(n.StringToArrayBuffer(l)),o=new ArrayBuffer(2+f.byteLength+(s?s.byteLength:0)),h=new DataView(o);for(h.setInt16(0,f.length),i=0;i<f.byteLength;i++)h.setInt8(2+i,f[i]);if(s)for(c=new Int8Array(s),i=0;i<c.byteLength;i++)h.setInt8(2+f.byteLength+i,c[i]);e.Resolve(new r.RawWebsocketMessage(r.MessageType.Binary,o,t.Id))}}catch(a){e.Reject("Error formatting the message. "+a)}return e.Promise()};this.MakeHeaders=function(n){var i="",t;if(n.Headers)for(t in n.Headers)t&&(i+=t+": "+n.Headers[t]+u);return i};this.ParseHeaders=function(n){var u={},e,r,f,t;if(n&&(e=n.match(/[^\r\n]+/g),u))for(r=0,f=e;r<f.length;r++)if(t=f[r],t){var i=t.indexOf(":"),o=i>0?t.substr(0,i).trim().toLowerCase():t,s=i>0&&t.length>i+1?t.substr(i+1).trim():"";u[o]=s}return u};this.StringToArrayBuffer=function(n){for(var i=new ArrayBuffer(n.length),r=new DataView(i),t=0;t<n.length;t++)r.setUint8(t,n.charCodeAt(t));return i}}return n}();t.WebsocketMessageFormatter=f},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){}return Object.defineProperty(n,"TestHooksParamName",{get:function(){return"testhooks"},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ConnectionIdHeader",{get:function(){return"X-ConnectionId"},enumerable:!0,configurable:!0}),Object.defineProperty(n,"DeploymentIdParamName",{get:function(){return"cid"},enumerable:!0,configurable:!0}),Object.defineProperty(n,"FormatParamName",{get:function(){return"format"},enumerable:!0,configurable:!0}),Object.defineProperty(n,"LanguageParamName",{get:function(){return"language"},enumerable:!0,configurable:!0}),Object.defineProperty(n,"TranslationFromParamName",{get:function(){return"from"},enumerable:!0,configurable:!0}),Object.defineProperty(n,"TranslationToParamName",{get:function(){return"to"},enumerable:!0,configurable:!0}),n}();t.QueryParameterNames=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=i(6),u=i(1),r=i(0),e=i(2),o="testhooks",s="X-ConnectionId",h=function(){function n(){var n=this;this.Create=function(t,i,h){var a=t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,undefined),v,c,y,p,l;return a||(v=t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,undefined),a=n.Host(v)+u.Storage.Local.GetOrAdd("TranslationRelativeUri","/speech/translation/cognitiveservices/v1")),c={from:t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),to:t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages)},n.IsDebugModeEnabled&&(c[o]="1"),y="voice",p="features",t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,undefined)!==undefined&&(c[y]=t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice),c[p]="texttospeech"),l={},l[i.HeaderName]=i.Token,l[s]=h,new f.WebsocketConnection(a,c,l,new e.WebsocketMessageFormatter,h)}}return n.prototype.Host=function(n){return u.Storage.Local.GetOrAdd("Host","wss://"+n+".s2s.speech.microsoft.com")},Object.defineProperty(n.prototype,"IsDebugModeEnabled",{get:function(){var n=u.Storage.Local.GetOrAdd("IsDebugModeEnabled","false");return n.toLowerCase()==="true"},enumerable:!0,configurable:!0}),n}();t.TranslationConnectionFactory=h},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=i(0),r=i(2),f=function(){function n(){}return n.implTranslateRecognitionResult=function(n){var t=u.ResultReason.Canceled,i=""+n,f=r.RecognitionStatus2[i];switch(f){case r.RecognitionStatus2.Success:t=u.ResultReason.RecognizedSpeech;break;case r.RecognitionStatus2.NoMatch:case r.RecognitionStatus2.InitialSilenceTimeout:case r.RecognitionStatus2.BabbleTimeout:t=u.ResultReason.NoMatch;break;case r.RecognitionStatus2.EndOfDictation:case r.RecognitionStatus2.Error:default:t=u.ResultReason.Canceled}return t},n.implTranslateCancelResult=function(n){var t=u.CancellationReason.EndOfStream,i=""+n,f=r.RecognitionStatus2[i];switch(f){case r.RecognitionStatus2.Success:case r.RecognitionStatus2.EndOfDictation:case r.RecognitionStatus2.NoMatch:t=u.CancellationReason.EndOfStream;break;case r.RecognitionStatus2.InitialSilenceTimeout:case r.RecognitionStatus2.BabbleTimeout:case r.RecognitionStatus2.Error:default:t=u.CancellationReason.Error}return t},n}();t.EnumTranslation=f},function(n,t,i){"use strict";var e=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),f;Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),u=i(4),r=i(0),s=function(n){function t(){return n.call(this)||this}return e(t,n),t.fromSubscription=function(n,t){u.Contracts.throwIfNullOrWhitespace(n,"subscriptionKey");u.Contracts.throwIfNullOrWhitespace(t,"region");var i=new f;return i.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,n),i.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,t),i},t.fromAuthorizationToken=function(n,t){u.Contracts.throwIfNullOrWhitespace(n,"authorizationToken");u.Contracts.throwIfNullOrWhitespace(t,"region");var i=new f;return i.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,n),i.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,t),i},t.fromEndpoint=function(n,t){u.Contracts.throwIfNull(n,"endpoint");u.Contracts.throwIfNullOrWhitespace(t,"subscriptionKey");var i=new f;return i.properties.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,n.href),i.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,t),i},t}(r.SpeechConfig);t.SpeechTranslationConfig=s;f=function(n){function t(){var t=n.call(this)||this;return t.speechProperties=new r.PropertyCollection,t}return e(t,n),Object.defineProperty(t.prototype,"authorizationToken",{set:function(n){u.Contracts.throwIfNullOrWhitespace(n,"value");this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{set:function(n){u.Contracts.throwIfNullOrWhitespace(n,"value");this.properties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subscriptionKey",{get:function(){return this.speechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return r.OutputFormat[this.speechProperties.getProperty(o.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple])]},set:function(n){this.speechProperties.setProperty(o.OutputFormatPropertyName,r.OutputFormat[n])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endpointId",{get:function(){return this.speechProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)},set:function(n){this.speechProperties.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,n)},enumerable:!0,configurable:!0}),t.prototype.addTargetLanguage=function(n){u.Contracts.throwIfNullOrWhitespace(n,"value");var t=this.targetLanguages;t.push(n);this.properties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(","))},Object.defineProperty(t.prototype,"targetLanguages",{get:function(){return this.speechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,undefined)!==undefined?this.speechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"voiceName",{get:function(){return this.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice])},set:function(n){u.Contracts.throwIfNullOrWhitespace(n,"value");this.properties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"region",{get:function(){return this.speechProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)},enumerable:!0,configurable:!0}),t.prototype.setProperty=function(n,t){this.properties.setProperty(n,t)},t.prototype.getProperty=function(n,t){return this.speechProperties.getProperty(n,t)},Object.defineProperty(t.prototype,"properties",{get:function(){return this.speechProperties},enumerable:!0,configurable:!0}),t.prototype.close=function(){return},t}(s);t.SpeechTranslationConfigImpl=f},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),u=function(){function n(){this.keys=[];this.values=[]}return n.prototype.getProperty=function(n,t){for(var u=typeof n=="string"?n:r.PropertyId[n],i=0;i<this.keys.length;i++)if(this.keys[i]===u)return this.values[i];return t},n.prototype.setProperty=function(n,t){for(var u=typeof n=="string"?n:r.PropertyId[n],i=0;i<this.keys.length;i++)if(this.keys[i]===u){this.values[i]=t;return}this.keys.push(u);this.values.push(t)},n.prototype.clone=function(){for(var i=new n,t=0;t<this.keys.length;t++)i.keys.push(this.keys[t]),i.values.push(this.values[t]);return i},n}();t.PropertyCollection=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key";n[n.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint";n[n.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region";n[n.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token";n[n.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type";n[n.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId";n[n.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages";n[n.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice";n[n.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures";n[n.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion";n[n.SpeechServiceConnection_RecoMode=10]="SpeechServiceConnection_RecoMode";n[n.SpeechServiceConnection_RecoLanguage=11]="SpeechServiceConnection_RecoLanguage";n[n.Speech_SessionId=12]="Speech_SessionId";n[n.SpeechServiceResponse_RequestDetailedResultTrueFalse=13]="SpeechServiceResponse_RequestDetailedResultTrueFalse";n[n.SpeechServiceResponse_RequestProfanityFilterTrueFalse=14]="SpeechServiceResponse_RequestProfanityFilterTrueFalse";n[n.SpeechServiceResponse_JsonResult=15]="SpeechServiceResponse_JsonResult";n[n.SpeechServiceResponse_JsonErrorDetails=16]="SpeechServiceResponse_JsonErrorDetails";n[n.CancellationDetails_Reason=17]="CancellationDetails_Reason";n[n.CancellationDetails_ReasonText=18]="CancellationDetails_ReasonText";n[n.CancellationDetails_ReasonDetailedText=19]="CancellationDetails_ReasonDetailedText";n[n.LanguageUnderstandingServiceResponse_JsonResult=20]="LanguageUnderstandingServiceResponse_JsonResult"})(i=t.PropertyId||(t.PropertyId={}))},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=i(2),f=i(7),e=i(1),o=i(4),r=i(0),s=function(){function n(n){this.audioConfig=n!==undefined?n:r.AudioConfig.fromDefaultMicrophoneInput();this.disposed=!1}return n.prototype.close=function(){o.Contracts.throwIfDisposed(this.disposed);this.dispose(!0)},n.prototype.dispose=function(n){this.disposed||(n,this.disposed=!0)},n.prototype.implRecognizerSetup=function(n,t,i,f){var s=this.CreateRecognizerConfig(new u.PlatformConfig(new u.Context(new u.OS("navigator.userAgent","Browser",null),new u.Device("Microsoft","SpeechSDK","1.0.0"))),n),o=t.getProperty(r.PropertyId.SpeechServiceConnection_Key,undefined),h=o?new u.CognitiveSubscriptionKeyAuthentication(o):new u.CognitiveTokenAuthentication(function(){var n=t.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,undefined);return e.PromiseHelper.FromResult(n)},function(){var n=t.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,undefined);return e.PromiseHelper.FromResult(n)});return this.CreateServiceRecognizer(h,f,i,s)},n.prototype.implRecognizerStart=function(n,t,i){var u=this;n.Recognize(function(n){var i,e,o;if(!u.disposed)switch(n.Name){case"RecognitionTriggeredEvent":case"ListeningStartedEvent":break;case"RecognitionStartedEvent":i=new r.SessionEventArgs(n.SessionId);!u.sessionStarted||u.sessionStarted(u,i);break;case"RecognitionEndedEvent":o=n;i=new r.SessionEventArgs(o.SessionId);o.Status!==f.RecognitionCompletionStatus.Success&&t&&t(n);!u.sessionStopped||u.sessionStopped(u,i);break;case"SpeechStartDetectedEvent":e=new r.RecognitionEventArgs(0,n.SessionId);!u.speechStartDetected||u.speechStartDetected(u,e);break;case"SpeechEndDetectedEvent":e=new r.RecognitionEventArgs(0,n.SessionId);!u.speechEndDetected||u.speechEndDetected(u,e);break;default:t&&t(n)}},i).On(function(){},function(n){if(!!t){var i=new f.InternalErrorEvent(undefined,undefined,"Runtime error: "+n);t(i)}})},n}();t.Recognizer=s},function(n,t,i){"use strict";var o=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=i(2),e=i(18),f=i(4),r=i(0),s=function(n){function t(t,i){var e=n.call(this,i)||this,u;return e.disposedSpeechRecognizer=!1,u=t,f.Contracts.throwIfNull(u,"speechConfig"),e.privProperties=u.properties.clone(),f.Contracts.throwIfNullOrWhitespace(u.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),e}return o(t,n),Object.defineProperty(t.prototype,"endpointId",{get:function(){return f.Contracts.throwIfDisposed(this.disposedSpeechRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)},set:function(n){f.Contracts.throwIfNullOrWhitespace(n,"token");this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return f.Contracts.throwIfDisposed(this.disposedSpeechRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return f.Contracts.throwIfDisposed(this.disposedSpeechRecognizer),this.properties.getProperty(u.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple])===r.OutputFormat[r.OutputFormat.Simple]?r.OutputFormat.Simple:r.OutputFormat.Detailed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!0,configurable:!0}),t.prototype.recognizeOnceAsync=function(n,t){var i=this,o;try{f.Contracts.throwIfDisposed(this.disposedSpeechRecognizer);this.implCloseExistingRecognizer();this.reco=this.implRecognizerSetup(u.RecognitionMode.Interactive,this.properties,this.audioConfig,new e.SpeechConnectionFactory);this.implRecognizerStart(this.reco,function(r){!i.disposedSpeechRecognizer&&i.reco&&i.implDispatchMessageHandler(r,n,t)})}catch(r){!t||(r instanceof Error?(o=r,t(o.name+": "+o.message)):t(r))}},t.prototype.startContinuousRecognitionAsync=function(n,t){var i=this,o;try{if(f.Contracts.throwIfDisposed(this.disposedSpeechRecognizer),this.implCloseExistingRecognizer(),this.reco=this.implRecognizerSetup(u.RecognitionMode.Conversation,this.properties,this.audioConfig,new e.SpeechConnectionFactory),this.implRecognizerStart(this.reco,function(n){!i.disposedSpeechRecognizer&&i.reco&&i.implDispatchMessageHandler(n,undefined,undefined)}),!!n){try{n()}catch(s){!t||t(s)}n=undefined}}catch(r){!t||(r instanceof Error?(o=r,t(o.name+": "+o.message)):t(r))}},t.prototype.stopContinuousRecognitionAsync=function(n,t){try{if(f.Contracts.throwIfDisposed(this.disposedSpeechRecognizer),this.implCloseExistingRecognizer(),!!n)try{n()}catch(u){!t||t(u)}}catch(i){if(!!t)if(i instanceof Error){var r=i;t(r.name+": "+r.message)}else t(i)}},t.prototype.startKeywordRecognitionAsync=function(n,t,i){f.Contracts.throwIfNull(n,"model");!i||i("Not yet implemented.")},t.prototype.stopKeywordRecognitionAsync=function(n){!n||n()},t.prototype.close=function(){f.Contracts.throwIfDisposed(this.disposedSpeechRecognizer);this.dispose(!0)},t.prototype.dispose=function(t){this.disposedSpeechRecognizer||(t&&(this.implCloseExistingRecognizer(),this.disposedSpeechRecognizer=!0),n.prototype.dispose.call(this,t))},t.prototype.CreateRecognizerConfig=function(n,t){return new u.RecognizerConfig(n,t,this.properties)},t.prototype.CreateServiceRecognizer=function(n,t,i,r){var f=i;return new u.SpeechServiceRecognizer(n,t,f,r)},t.prototype.implCloseExistingRecognizer=function(){this.reco&&(this.reco.AudioSource.TurnOff(),this.reco.Dispose(),this.reco=undefined)},t.prototype.implDispatchMessageHandler=function(n,t,i){var s,c,a,e,o;switch(n.Name){case"RecognitionEndedEvent":if(s=n,s.Status!==u.RecognitionCompletionStatus.Success){if(c=u.RecognitionCompletionStatus[s.Status]+": "+s.Error,a=new r.SpeechRecognitionCanceledEventArgs(r.CancellationReason.Error,c,0,s.SessionId),this.canceled)try{this.canceled(this,a)}catch(y){}if(e=new r.SpeechRecognitionResult(undefined,r.ResultReason.Canceled,undefined,undefined,undefined,c,undefined,undefined),!!t)try{t(e)}catch(l){!i||i(l)}}break;case"SpeechSimplePhraseEvent":var f=n,h=u.EnumTranslation.implTranslateRecognitionResult(f.Result.RecognitionStatus),e=new r.SpeechRecognitionResult(undefined,h,f.Result.DisplayText,f.Result.Duration,f.Result.Offset,undefined,JSON.stringify(f.Result),undefined);if(h===r.ResultReason.Canceled){if(o=new r.SpeechRecognitionCanceledEventArgs(u.EnumTranslation.implTranslateCancelResult(f.Result.RecognitionStatus),undefined,0,f.SessionId),!!this.canceled)try{this.canceled(this,o)}catch(y){}}else if(o=new r.SpeechRecognitionEventArgs(e,0,f.SessionId),!!this.recognized)try{this.recognized(this,o)}catch(y){}if(!!t){try{t(e)}catch(l){!i||i(l)}t=undefined;i=undefined}break;case"SpeechDetailedPhraseEvent":var f=n,h=u.EnumTranslation.implTranslateRecognitionResult(f.Result.RecognitionStatus),e=new r.SpeechRecognitionResult(undefined,h,h===r.ResultReason.RecognizedSpeech?f.Result.NBest[0].Display:undefined,f.Result.Duration,f.Result.Offset,undefined,JSON.stringify(f.Result),undefined);if(h===r.ResultReason.Canceled){if(o=new r.SpeechRecognitionCanceledEventArgs(u.EnumTranslation.implTranslateCancelResult(f.Result.RecognitionStatus),undefined,0,f.SessionId),!!this.canceled)try{this.canceled(this,o)}catch(y){}}else if(o=new r.SpeechRecognitionEventArgs(e,0,f.SessionId),!!this.recognized)try{this.recognized(this,o)}catch(y){}if(!!t)try{t(e)}catch(y){}break;case"SpeechHypothesisEvent":var f=n,e=new r.SpeechRecognitionResult(undefined,r.ResultReason.RecognizingSpeech,f.Result.Text,f.Result.Duration,f.Result.Offset,undefined,JSON.stringify(f.Result),undefined),o=new r.SpeechRecognitionEventArgs(e,0,f.SessionId);if(!!this.recognizing)try{this.recognizing(this,o)}catch(y){}break;case"InternalErrorEvent":var f=n,e=new r.SpeechRecognitionResult(f.RequestId,r.ResultReason.Canceled,undefined,undefined,undefined,f.Result),v=new r.SpeechRecognitionCanceledEventArgs(r.CancellationReason.Error,e.errorDetails);try{this.canceled(this,v)}catch(y){}if(!!t){try{t(e)}catch(l){!i||i(l)}t=undefined;i=undefined}}},t}(r.Recognizer);t.SpeechRecognizer=s},function(n,t,i){"use strict";var o=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),e;Object.defineProperty(t,"__esModule",{value:!0});var f=i(2),u=i(4),r=i(0),s=function(n){function t(t,i){var f=this,e;return u.Contracts.throwIfNullOrUndefined(t,"speechConfig"),e=t,u.Contracts.throwIfNullOrUndefined(e,"speechConfig"),f=n.call(this,i)||this,f.intentDataSent=!1,f.addedIntents=[],f.addedLmIntents={},f.disposedIntentRecognizer=!1,f.privProperties=e.properties,u.Contracts.throwIfNullOrWhitespace(f.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),f}return o(t,n),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return u.Contracts.throwIfDisposed(this.disposedIntentRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)},set:function(n){this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!0,configurable:!0}),t.prototype.recognizeOnceAsync=function(n,t){var i=this,r,o;try{u.Contracts.throwIfDisposed(this.disposedIntentRecognizer);this.implCloseExistingRecognizer();this.reco=this.implRecognizerSetup(f.RecognitionMode.Interactive,this.properties,this.audioConfig,new f.IntentConnectionFactory);r=void 0;(Object.keys(this.addedLmIntents).length!==0||undefined!==this.umbrellaIntent)&&(r=this.buildSpeechContext(),this.intentDataSent=!0);this.implRecognizerStart(this.reco,function(r){!i.disposedIntentRecognizer&&i.reco&&i.implDispatchMessageHandler(r,n,t)},r)}catch(e){!t||(e instanceof Error?(o=e,t(o.name+": "+o.message)):t(e))}},t.prototype.startContinuousRecognitionAsync=function(n,t){var i=this,r,o;try{if(u.Contracts.throwIfDisposed(this.disposedIntentRecognizer),this.implCloseExistingRecognizer(),this.reco=this.implRecognizerSetup(f.RecognitionMode.Conversation,this.properties,this.audioConfig,new f.IntentConnectionFactory),r=void 0,Object.keys(this.addedLmIntents).length!==0&&(r=this.buildSpeechContext(),this.intentDataSent=!0),this.implRecognizerStart(this.reco,function(n){!i.disposedIntentRecognizer&&i.reco&&i.implDispatchMessageHandler(n,undefined,undefined)},r),!!n){try{n()}catch(s){!t||t(s)}n=undefined}}catch(e){!t||(e instanceof Error?(o=e,t(o.name+": "+o.message)):t(e))}},t.prototype.stopContinuousRecognitionAsync=function(n,t){try{if(u.Contracts.throwIfDisposed(this.disposedIntentRecognizer),this.implCloseExistingRecognizer(),!!n)try{n()}catch(f){!t||t(f)}}catch(i){if(!!t)if(i instanceof Error){var r=i;t(r.name+": "+r.message)}else t(i)}},t.prototype.startKeywordRecognitionAsync=function(n,t,i){u.Contracts.throwIfNull(n,"model");!i||i("Not yet implemented.")},t.prototype.stopKeywordRecognitionAsync=function(n){!n||n()},t.prototype.addIntent=function(n,t){u.Contracts.throwIfDisposed(this.disposedIntentRecognizer);u.Contracts.throwIfNullOrWhitespace(t,"intentId");u.Contracts.throwIfNullOrWhitespace(n,"simplePhrase");this.addedIntents.push([t,n])},t.prototype.addIntentWithLanguageModel=function(n,t,i){u.Contracts.throwIfDisposed(this.disposedIntentRecognizer);u.Contracts.throwIfNullOrWhitespace(n,"intentId");u.Contracts.throwIfNull(t,"model");var r=t;u.Contracts.throwIfNullOrWhitespace(r.appId,"model.appId");this.addedLmIntents[n]=new e(r,i)},t.prototype.addAllIntents=function(n,t){u.Contracts.throwIfNull(n,"model");var i=n;u.Contracts.throwIfNullOrWhitespace(i.appId,"model.appId");this.umbrellaIntent=new e(i,t)},t.prototype.close=function(){u.Contracts.throwIfDisposed(this.disposedIntentRecognizer);this.dispose(!0)},t.prototype.CreateRecognizerConfig=function(n,t){return new f.RecognizerConfig(n,t,this.properties)},t.prototype.CreateServiceRecognizer=function(n,t,i,r){var u=i;return new f.IntentServiceRecognizer(n,t,u,r)},t.prototype.dispose=function(t){this.disposedIntentRecognizer||t&&(this.disposedIntentRecognizer=!0,n.prototype.dispose.call(this,t))},t.prototype.implDispatchMessageHandler=function(n,t,i){var v=this,h,s,w,e,u,l,y,c,p;switch(n.Name){case"RecognitionEndedEvent":if(h=n,h.Status!==f.RecognitionCompletionStatus.Success){if(s=new r.IntentRecognitionResult(undefined,undefined,r.ResultReason.Canceled,undefined,undefined,undefined,f.RecognitionCompletionStatus[h.Status]+": "+h.Error,undefined,undefined),w=new r.IntentRecognitionCanceledEventArgs(r.CancellationReason.Error,h.Error,s,0,h.SessionId),this.canceled)try{this.canceled(this,w)}catch(g){}if(!!t)try{t(s)}catch(a){!i||i(a)}}break;case"SpeechSimplePhraseEvent":var u=n,c=f.EnumTranslation.implTranslateRecognitionResult(u.Result.RecognitionStatus),s=new r.IntentRecognitionResult(undefined,undefined,c,u.Result.DisplayText,u.Result.Duration,u.Result.Offset,undefined,JSON.stringify(u.Result),undefined);if(c===r.ResultReason.Canceled){if(e=new r.IntentRecognitionCanceledEventArgs(f.EnumTranslation.implTranslateCancelResult(u.Result.RecognitionStatus),"",s,0,u.SessionId),!!this.canceled)try{this.canceled(this,e)}catch(g){}if(!!t)try{t(s)}catch(a){!i||i(a)}}else{var o=new r.IntentRecognitionEventArgs(s,0,u.SessionId),k=function(){if(!!v.recognized)try{v.recognized(v,o)}catch(r){}if(!!t){try{t(o.result)}catch(n){!i||i(n)}t=undefined;i=undefined}},b=f.RecognitionStatus2[u.Result.RecognitionStatus];(b===f.RecognitionStatus2.InitialSilenceTimeout||b===f.RecognitionStatus2.BabbleTimeout)&&(o=new r.IntentRecognitionEventArgs(new r.IntentRecognitionResult(o.result.intentId,o.result.resultId,r.ResultReason.NoMatch,o.result.text,o.result.duration,o.result.offset,o.result.errorDetails,o.result.json,o.result.properties),o.offset,o.sessionId));!1===this.intentDataSent||r.ResultReason.NoMatch===o.result.reason?k():this.pendingIntentArgs=o}break;case"SpeechHypothesisEvent":var u=n,s=new r.IntentRecognitionResult(undefined,undefined,r.ResultReason.RecognizingIntent,u.Result.Text,u.Result.Duration,u.Result.Offset,undefined,JSON.stringify(u.Result),undefined),e=new r.IntentRecognitionEventArgs(s,0,u.SessionId);if(!!this.recognizing)try{this.recognizing(this,e)}catch(g){}break;case"IntentResponseEvent":if(e=this.pendingIntentArgs,this.pendingIntentArgs=undefined,u=n,undefined===e&&(e=new r.IntentRecognitionEventArgs(new r.IntentRecognitionResult,0,u.SessionId)),l=this.addedLmIntents[u.Result.topScoringIntent.intent],this.umbrellaIntent!==undefined&&(l=this.umbrellaIntent),null!==u.Result&&l!==undefined&&(y=l.intentName===undefined?u.Result.topScoringIntent.intent:l.intentName,c=e.result.reason,undefined!==y&&(c=r.ResultReason.RecognizedIntent),p=undefined!==e.result.properties?e.result.properties:new r.PropertyCollection,p.setProperty(r.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,JSON.stringify(u.Result)),e=new r.IntentRecognitionEventArgs(new r.IntentRecognitionResult(y,e.result.resultId,c,e.result.text,e.result.duration,e.result.offset,e.result.errorDetails,e.result.json,p),e.offset,e.sessionId)),!!this.recognized)try{this.recognized(this,e)}catch(g){}if(!!t){try{t(e.result)}catch(a){!i||i(a)}t=undefined;i=undefined}break;case"InternalErrorEvent":var u=n,s=new r.IntentRecognitionResult(undefined,undefined,r.ResultReason.Canceled,undefined,undefined,undefined,u.Result),d=new r.IntentRecognitionCanceledEventArgs(r.CancellationReason.Error,s.errorDetails,s);try{this.canceled(this,d)}catch(g){}if(!!t){try{t(s)}catch(a){!i||i(a)}t=undefined;i=undefined}}},t.prototype.implCloseExistingRecognizer=function(){this.reco&&(this.reco.AudioSource.TurnOff(),this.reco.Dispose(),this.reco=undefined)},t.prototype.buildSpeechContext=function(){var n,u,i,s=[],f,e,o,t,h;for(undefined!==this.umbrellaIntent&&(n=this.umbrellaIntent.modelImpl.appId,u=this.umbrellaIntent.modelImpl.region,i=this.umbrellaIntent.modelImpl.subscriptionKey),f=0,e=Object.keys(this.addedLmIntents);f<e.length;f++){if(o=e[f],t=this.addedLmIntents[o],n===undefined)n=t.modelImpl.appId;else if(n!==t.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(u===undefined)u=t.modelImpl.region;else if(u!==t.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(i===undefined)i=t.modelImpl.subscriptionKey;else if(i!==t.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");h="luis/"+n+"-PRODUCTION#"+o;s.push(h)}return JSON.stringify({dgi:{ReferenceGrammars:undefined===this.umbrellaIntent?s:["luis/"+n+"-PRODUCTION"]},intent:{id:n,key:i===undefined?this.privProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key]):i,provider:"LUIS"}})},t}(r.Recognizer);t.IntentRecognizer=s;e=function(){function n(n,t){this.modelImpl=n;this.intentName=t}return n}()},function(n,t,i){"use strict";var e=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=i(2),f=i(4),r=i(0),o=function(n){function t(t,i){var u=this,e=t;return f.Contracts.throwIfNull(e,"speechConfig"),u=n.call(this,i)||this,u.disposedTranslationRecognizer=!1,u.privProperties=e.properties.clone(),u.properties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,undefined)!==undefined&&f.Contracts.throwIfNullOrWhitespace(u.properties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice),r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice]),f.Contracts.throwIfNullOrWhitespace(u.properties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages),r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationToLanguages]),f.Contracts.throwIfNullOrWhitespace(u.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),u}return e(t,n),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return f.Contracts.throwIfDisposed(this.disposedTranslationRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"targetLanguages",{get:function(){return f.Contracts.throwIfDisposed(this.disposedTranslationRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"voiceName",{get:function(){return f.Contracts.throwIfDisposed(this.disposedTranslationRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,undefined)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)},set:function(n){this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!0,configurable:!0}),t.prototype.recognizeOnceAsync=function(n,t){var i=this,e;try{f.Contracts.throwIfDisposed(this.disposedTranslationRecognizer);this.implCloseExistingRecognizer();this.reco=this.implRecognizerSetup(u.RecognitionMode.Conversation,this.properties,this.audioConfig,new u.TranslationConnectionFactory);this.implRecognizerStart(this.reco,function(r){!i.disposedTranslationRecognizer&&i.reco&&i.implDispatchMessageHandler(r,n,t)})}catch(r){!t||(r instanceof Error?(e=r,t(e.name+": "+e.message)):t(r))}},t.prototype.startContinuousRecognitionAsync=function(n,t){var i=this,e;try{if(f.Contracts.throwIfDisposed(this.disposedTranslationRecognizer),this.implCloseExistingRecognizer(),this.reco=this.implRecognizerSetup(u.RecognitionMode.Conversation,this.properties,this.audioConfig,new u.TranslationConnectionFactory),this.implRecognizerStart(this.reco,function(n){!i.disposedTranslationRecognizer&&i.reco&&i.implDispatchMessageHandler(n,undefined,undefined)}),!!n){try{n()}catch(o){!t||t(o)}n=undefined}}catch(r){!t||(r instanceof Error?(e=r,t(e.name+": "+e.message)):t(r))}},t.prototype.stopContinuousRecognitionAsync=function(n,t){try{if(f.Contracts.throwIfDisposed(this.disposedTranslationRecognizer),this.implCloseExistingRecognizer(),!!n)try{n()}catch(u){!t||t(u)}}catch(i){if(!!t)if(i instanceof Error){var r=i;t(r.name+": "+r.message)}else t(i)}},t.prototype.close=function(){f.Contracts.throwIfDisposed(this.disposedTranslationRecognizer);this.dispose(!0)},t.prototype.dispose=function(t){this.disposedTranslationRecognizer||t&&(this.implCloseExistingRecognizer(),this.disposedTranslationRecognizer=!0,n.prototype.dispose.call(this,t))},t.prototype.CreateRecognizerConfig=function(n){return new u.RecognizerConfig(n,u.RecognitionMode.Conversation,this.properties)},t.prototype.CreateServiceRecognizer=function(n,t,i,r){var f=i;return new u.TranslationServiceRecognizer(n,t,f,r)},t.prototype.implCloseExistingRecognizer=function(){this.reco&&(this.reco.AudioSource.TurnOff(),this.reco.Dispose(),this.reco=undefined)},t.prototype.implDispatchMessageHandler=function(n,t,i){var e,k,a,s,g,y,nt,tt,p;if(this.reco)switch(n.Name){case"RecognitionEndedEvent":if(e=n,e.Status!==u.RecognitionCompletionStatus.Success){if(k=new r.TranslationRecognitionResult(undefined,undefined,r.ResultReason.Canceled,undefined,undefined,undefined,u.RecognitionCompletionStatus[e.Status]+": "+e.Error,undefined,undefined),a=new r.TranslationRecognitionCanceledEventArgs(e.SessionId,r.CancellationReason.Error,e.Error,k),!!this.canceled)try{this.canceled(this,a)}catch(st){}if(!!t){try{t(a.result)}catch(o){!i||i(o)}t=undefined;i=undefined}}break;case"RecognitionFailedEvent":var f=n,d=u.EnumTranslation.implTranslateRecognitionResult(f.Result.RecognitionStatus),v=new r.TranslationRecognitionResult(undefined,undefined,d,f.Result.DisplayText,f.Result.Duration,f.Result.Offset,undefined,JSON.stringify(f.Result),undefined);if(d===r.ResultReason.Canceled){if(s=new r.TranslationRecognitionCanceledEventArgs(f.SessionId,u.EnumTranslation.implTranslateCancelResult(f.Result.RecognitionStatus),null,v),!!this.canceled)try{this.canceled(this,s)}catch(st){}}else if(s=new r.TranslationRecognitionEventArgs(v,0,f.SessionId),!!this.recognized)try{this.recognized(this,s)}catch(st){}if(!!t){try{t(v)}catch(o){!i||i(o)}t=undefined;i=undefined}break;case"TranslationPhraseEvent":if(g=n,y=this.FireEventForResult(g),!!this.recognized)try{this.recognized(this,y)}catch(st){}if(!!t){try{t(y.result)}catch(o){!i||i(o)}t=undefined;i=undefined}break;case"TranslationHypothesisEvent":if(nt=n,tt=this.FireEventForResult(nt),!!this.recognizing)try{this.recognizing(this,tt)}catch(st){}break;case"TranslationFailedEvent":var h=n,ut=new r.TranslationRecognitionResult(undefined,undefined,r.ResultReason.RecognizedSpeech,h.Result.Text,h.Result.Duration,h.Result.Offset,undefined,undefined,undefined),c=new r.TranslationRecognitionEventArgs(ut,0,h.SessionId);if(!!this.recognized)try{this.recognized(this,c)}catch(st){}if(!!t){try{t(c.result)}catch(o){!i||i(o)}t=undefined;i=undefined}break;case"TranslationSynthesisEvent":var it=n,rt=it.Result,ft=undefined===rt?r.ResultReason.SynthesizingAudioCompleted:r.ResultReason.SynthesizingAudio,et=new r.TranslationSynthesisResult(ft,rt),c=new r.TranslationSynthesisEventArgs(et,it.SessionId);if(!!this.synthesizing)try{this.synthesizing(this,c)}catch(st){}break;case"TranslationSynthesisErrorEvent":var l=n,ot=new r.TranslationSynthesisResult(l.Result.SynthesisStatus,undefined),c=new r.TranslationSynthesisEventArgs(ot,l.SessionId);if(!!this.synthesizing)try{this.synthesizing(this,c)}catch(st){}if(!!this.canceled){p=new r.TranslationRecognitionCanceledEventArgs(l.SessionId,r.CancellationReason.Error,l.Result.FailureReason,null);try{this.canceled(this,p)}catch(st){}}break;case"InternalErrorEvent":var w=n,b=new r.TranslationRecognitionResult(undefined,w.RequestId,r.ResultReason.Canceled,undefined,undefined,undefined,w.Result),p=new r.TranslationRecognitionCanceledEventArgs(w.SessionId,r.CancellationReason.Error,b.errorDetails,b);try{this.canceled(this,p)}catch(st){}if(!!t){try{t(b)}catch(o){!i||i(o)}t=undefined;i=undefined}}},t.prototype.FireEventForResult=function(n){for(var i,o,s,f=new r.Translations,t=0,e=n.Result.Translation.Translations;t<e.length;t++)i=e[t],f.set(i.Language,i.Text);return o=new r.TranslationRecognitionResult(f,undefined,n instanceof u.TranslationPhraseEvent?r.ResultReason.TranslatedSpeech:r.ResultReason.TranslatingSpeech,n.Result.Text,n.Result.Duration,n.Result.Offset,undefined,JSON.stringify(n.Result),undefined),s=new r.TranslationRecognitionEventArgs(o,0,n.SessionId),s},t}(r.Recognizer);t.TranslationRecognizer=o},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),u=function(){function n(){this.map=new r.PropertyCollection}return n.prototype.get=function(n,t){return this.map.getProperty(n,t)},n.prototype.set=function(n,t){this.map.setProperty(n,t)},n}();t.Translations=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.NotRecognized=0]="NotRecognized";n[n.InitialSilenceTimeout=1]="InitialSilenceTimeout";n[n.InitialBabbleTimeout=2]="InitialBabbleTimeout"})(i=t.NoMatchReason||(t.NoMatchReason={}))},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=i(2),r=i(0),f=function(){function n(n){this.privReason=n}return n.fromResult=function(t){var f=JSON.parse(t.json),i=r.NoMatchReason.NotRecognized,e=u.RecognitionStatus2[f.RecognitionStatus];switch(e){case u.RecognitionStatus2.BabbleTimeout:i=r.NoMatchReason.InitialBabbleTimeout;break;case u.RecognitionStatus2.InitialSilenceTimeout:i=r.NoMatchReason.InitialSilenceTimeout;break;default:i=r.NoMatchReason.NotRecognized}return new n(i)},Object.defineProperty(n.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),n}();t.NoMatchDetails=f},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t,i,r){this.privCancelReason=t;this.privErrorDetails=i;this.privResult=r;this.privSessionId=n}return Object.defineProperty(n.prototype,"result",{get:function(){return this.privResult},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reason",{get:function(){return this.privCancelReason},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!0,configurable:!0}),n}();t.TranslationRecognitionCanceledEventArgs=i},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=function(n){function t(t,i,r,u,f){var e=n.call(this,r,u,f)||this;return e.privReason=t,e.privErrorDetails=i,e}return f(t,n),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!0,configurable:!0}),t}(r.IntentRecognitionEventArgs);t.IntentRecognitionCanceledEventArgs=u},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),u=i(0),f=function(){function n(n,t){this.privReason=n;this.privErrorDetails=t}return n.fromResult=function(t){var i=u.CancellationReason.Error;if(!!t.json){var f=JSON.parse(t.json),e=""+f.RecognitionStatus,o=r.RecognitionStatus2[e];switch(o){case r.RecognitionStatus2.Success:case r.RecognitionStatus2.EndOfDictation:case r.RecognitionStatus2.NoMatch:i=u.CancellationReason.EndOfStream;break;case r.RecognitionStatus2.InitialSilenceTimeout:case r.RecognitionStatus2.BabbleTimeout:case r.RecognitionStatus2.Error:default:i=u.CancellationReason.Error}}return new n(i,t.errorDetails)},Object.defineProperty(n.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!0,configurable:!0}),n}();t.CancellationDetails=f},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=i(0),r=i(1),f=i(6),e=function(){function n(t,i){var u=this;this.streams={};this.TurnOn=function(){var t;return typeof FileReader=="undefined"?(t="Browser does not support FileReader.",u.OnEvent(new r.AudioSourceErrorEvent(t,"")),r.PromiseHelper.FromError(t)):u.file.name.lastIndexOf(".wav")!==u.file.name.length-4?(t=u.file.name+" is not supported. Only WAVE files are allowed at the moment.",u.OnEvent(new r.AudioSourceErrorEvent(t,"")),r.PromiseHelper.FromError(t)):u.file.size>n.MAX_SIZE?(t=u.file.name+" exceeds the maximum allowed file size ("+n.MAX_SIZE+").",u.OnEvent(new r.AudioSourceErrorEvent(t,"")),r.PromiseHelper.FromError(t)):(u.OnEvent(new r.AudioSourceInitializingEvent(u.id)),u.OnEvent(new r.AudioSourceReadyEvent(u.id)),r.PromiseHelper.FromResult(!0))};this.Id=function(){return u.id};this.Attach=function(n){return u.OnEvent(new r.AudioStreamNodeAttachingEvent(u.id,n)),u.Upload(n).OnSuccessContinueWith(function(t){return u.OnEvent(new r.AudioStreamNodeAttachedEvent(u.id,n)),{Detach:function(){t.Close();delete u.streams[n];u.OnEvent(new r.AudioStreamNodeDetachedEvent(u.id,n));u.TurnOff()},Id:function(){return n},Read:function(){return t.Read()}}})};this.Detach=function(n){n&&u.streams[n]&&(u.streams[n].Close(),delete u.streams[n],u.OnEvent(new r.AudioStreamNodeDetachedEvent(u.id,n)))};this.TurnOff=function(){var t,n;for(t in u.streams)t&&(n=u.streams[t],n&&!n.IsClosed&&n.Close());return u.OnEvent(new r.AudioSourceOffEvent(u.id)),r.PromiseHelper.FromResult(!0)};this.Upload=function(t){return u.TurnOn().OnSuccessContinueWith(function(){var e=new r.Stream(t),l;u.streams[t]=e;var o=new FileReader,s=0,i=n.CHUNK_SIZE,h=0,c=function(){var t,r;if(!e.IsClosed){if(h!==0&&(t=Date.now()-h,t<n.UPLOAD_INTERVAL)){new f.Timer(n.UPLOAD_INTERVAL-t,c).start();return}e.Write(o.result);h=Date.now();i<u.file.size?(s=i,i=Math.min(i+n.CHUNK_SIZE,u.file.size),r=u.file.slice(s,i),o.readAsArrayBuffer(r)):e.Close()}};return o.onload=c,o.onerror=function(n){var i="Error occurred while processing '"+u.file.name+"'. "+n.error;u.OnEvent(new r.AudioStreamNodeErrorEvent(u.id,t,n.error));throw new Error(i);},l=u.file.slice(s,i),o.readAsArrayBuffer(l),e.GetReader()})};this.OnEvent=function(n){u.events.OnEvent(n);r.Events.Instance.OnEvent(n)};this.id=i?i:r.CreateNoDashGuid();this.events=new r.EventSource;this.file=t}return Object.defineProperty(n.prototype,"Format",{get:function(){return n.FILEFORMAT},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Events",{get:function(){return this.events},enumerable:!0,configurable:!0}),n.SAMPLE_RATE=32e3,n.CHUNK_SIZE=n.SAMPLE_RATE*2/5,n.UPLOAD_INTERVAL=200,n.MAX_SIZE=n.SAMPLE_RATE*600+44,n.FILEFORMAT=u.AudioStreamFormat.getWaveFormatPCM(16e3,16,1),n}();t.FileAudioSource=e},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n){var t=this;this.Record=function(n,i,r){var u=new MediaRecorder(i,t.mediaRecorderOptions);u.ondataavailable=function(n){if(r){var t=new FileReader;t.readAsArrayBuffer(n.data);t.onloadend=function(){r.Write(t.result)}}};t.mediaResources={recorder:u,stream:i};u.start(100)};this.ReleaseMediaResources=function(){t.mediaResources.recorder.state!=="inactive"&&t.mediaResources.recorder.stop();t.mediaResources.stream.getTracks().forEach(function(n){return n.stop()})};this.mediaRecorderOptions=n}return n}();t.OpusRecorder=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),u=function(){function n(){var n=this;this.Record=function(t,i,u){var o=16e3,f=function(){var n=0,i;try{return t.createScriptProcessor(n,1,1)}catch(r){for(n=2048,i=t.sampleRate;n<16384&&i>=2*o;)n<<=1,i>>=1;return t.createScriptProcessor(n,1,1)}}(),h=new r.RiffPcmEncoder(t.sampleRate,o),s=!0,c=n,e;f.onaudioprocess=function(n){var i=n.inputBuffer.getChannelData(0),t;u&&!u.IsClosed&&(t=h.Encode(s,i),!t||(u.Write(t),s=!1))};e=t.createMediaStreamSource(i);n.mediaResources={scriptProcessorNode:f,source:e,stream:i};e.connect(f);f.connect(t.destination)};this.ReleaseMediaResources=function(t){n.mediaResources&&(n.mediaResources.scriptProcessorNode&&(n.mediaResources.scriptProcessorNode.disconnect(t.destination),n.mediaResources.scriptProcessorNode=null),n.mediaResources.source&&(n.mediaResources.source.disconnect(),n.mediaResources.stream.getTracks().forEach(function(n){return n.stop()}),n.mediaResources.source=null))}}return n}();t.PcmRecorder=u},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),u=function(){function n(){this.Get=function(n){if(!n)throw new r.ArgumentNullError("key");return sessionStorage.getItem(n)};this.GetOrAdd=function(n,t){if(!n)throw new r.ArgumentNullError("key");var i=sessionStorage.getItem(n);return(i===null||i===undefined)&&sessionStorage.setItem(n,t),sessionStorage.getItem(n)};this.Set=function(n,t){if(!n)throw new r.ArgumentNullError("key");sessionStorage.setItem(n,t)};this.Remove=function(n){if(!n)throw new r.ArgumentNullError("key");sessionStorage.removeItem(n)}}return n}();t.SessionStorage=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t){var i=this;this.start=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i.timerId&&i.stop();i.timerId=setTimeout(i.successCallback,i.delayInMillisec,t)};this.stop=function(){clearTimeout(i.timerId)};this.delayInMillisec=n;this.successCallback=t}return n}();t.Timer=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),u=i(19),f=function(){function n(n,t,i,f,e){var o=this,s,h,c,a,l;if(this.isDisposed=!1,this.Dispose=function(){o.isDisposed=!0;o.connectionMessageAdapter&&o.connectionMessageAdapter.Close()},this.IsDisposed=function(){return o.isDisposed},this.State=function(){return o.connectionMessageAdapter.State},this.Open=function(){return o.connectionMessageAdapter.Open()},this.Send=function(n){return o.connectionMessageAdapter.Send(n)},this.Read=function(){return o.connectionMessageAdapter.Read()},!n)throw new r.ArgumentNullError("uri");if(!f)throw new r.ArgumentNullError("messageFormatter");if(this.messageFormatter=f,s="",h=0,t)for(c in t)c&&(s+=h===0?"?":"&",l=encodeURIComponent(t[c]),s+=c+"="+l,h++);if(i)for(a in i)a&&(s+=h===0?"?":"&",l=encodeURIComponent(i[a]),s+=a+"="+l,h++);this.uri=n+s;this.id=e?e:r.CreateNoDashGuid();this.connectionMessageAdapter=new u.WebsocketMessageAdapter(this.uri,this.Id,this.messageFormatter)}return Object.defineProperty(n.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Events",{get:function(){return this.connectionMessageAdapter.Events},enumerable:!0,configurable:!0}),n}();t.WebsocketConnection=f}])})